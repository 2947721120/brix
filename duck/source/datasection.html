<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">KISSY.add('brix/gallery/charts/js/pub/utils/datasection',function(S){
	
	var DataSection  = {
		section:function($arr,$maxPart){
			var _max =  Math.max.apply(null,$arr)   //所有数据中最大值
			var _count =  $arr.length               //总共有几条数据
			var _maxPart = $maxPart ? $maxPart : 9  //当前 最多有几个分段
			var arr = []
			var tmpMax = _max
			var tmpMin = 0
			var l = String(Math.ceil(_max)).length
			if (_max % Math.pow(10, l - 1) != 0) {
				//千位数以上 
				if (l &gt;= 3) {
					if (parseInt(_max / Math.pow(10, l - 2)) % 2 == 0) {
						tmpMax = parseInt(_max / Math.pow(10, l - 2)) * Math.pow(10, l - 2) + 2 * Math.pow(10, l - 2)
					}else {
						tmpMax = parseInt(_max / Math.pow(10, l - 2)) * Math.pow(10, l - 2) + Math.pow(10, l - 2)
					}
				}else {
					tmpMax = parseInt(_max / Math.pow(10, l - 1) + 1) * Math.pow(10, l - 1)
				}
			}
			l = String(tmpMax).length
			if (_maxPart &gt;= _count ) { _maxPart = _count }
			var part = _maxPart
			//十位数以上
			if (l &gt;= 2) {
				for (var a = 1, al = tmpMax / Math.pow(10, l - 2) ; a &lt;= al; a++ ) {
					if (tmpMax / (a *  Math.pow(10, l - 2)) == parseInt(tmpMax / (a *  Math.pow(10, l - 2)))) {
						if (tmpMax / (a *  Math.pow(10, l - 2)) &lt;= _maxPart) {
							if (_maxPart - tmpMax / (a *  Math.pow(10, l - 2)) &lt; part) {
								part = _maxPart - tmpMax / (a *  Math.pow(10, l - 2))
							}
						}
					}
				}
				for (var b = 0, bl = _maxPart - part; b &lt; bl; b++ ) {
					arr[b] = tmpMax / (_maxPart - part) * (b + 1)
				}
				//个位数及小数点
			}else {
				for (var c = 1, cl = tmpMax ; c &lt;= cl; c++ ) {
					if (tmpMax / c == parseInt(tmpMax / c)) {
						if (tmpMax / c &lt;= _maxPart) {
							if (_maxPart - tmpMax / c &lt; part) {
								part = _maxPart - tmpMax / c
							}
						}
					}
				}
				for (var d = 0, dl = _maxPart - part; d &lt; dl; d++ ) {
					arr[d] = tmpMax / (_maxPart - part) * (d + 1)
				}
			}
			if (arr.length &lt; 1) {
				arr = [0]
			}
			return arr
		}
	};

	return DataSection;

	}
);</pre>
</body>
</html>
