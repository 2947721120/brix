KISSY.add("brix/gallery/inplaceeditor/index",function(e,t){var i=t.extend({constructor:function(){i.superclass.constructor.apply(this,arguments),this._v=null,this._x=0,this._y=0}});return i.ATTRS={autoRender:{value:!0},tmpl:{value:'<div class="inplaceeditor-popup"><input class="input" type="text" value=""></div>'}},i.EVENTS={input:{focusout:function(){this.hide()},keydown:function(e){if(13==e.keyCode)try{e.target.blur()}catch(e){}}}},i.FIRES={show:"show",hide:"hide",valueChange:"valueChange"},i.METHODS={show:function(e,t,a,n){var r=this.get("el"),o=r.one("input");r.css({visibility:"visible"}),void 0!==e&&(this._x=e),void 0!==t&&(this._y=t),r.css({left:this._x,top:this._y}),n&&o.css(n),o[0].focus(),void 0!==a&&(this._v=a,o.val(a)),this.fire(i.FIRES.show)},hide:function(){var t=this.getValue(),a=this.get("el");return this._v!=t&&this.fire(i.FIRES.valueChange,{value:t})===!1?(this._v=t,e.later(function(){try{a.one("input")[0].focus()}catch(e){}},50),void 0):(a.css({visibility:"hidden",left:"-9999px",top:"-9999px"}),this.fire(i.FIRES.hide),void 0)},getValue:function(){var e=this.get("el");return e.one("input").val()}},e.augment(i,i.METHODS),i},{requires:["brix/core/brick"]});