/*! Brix - v2.0
* https://github.com/etaoux/brix
* Copyright (c) 2013 etaoux; Licensed MIT */
(function(a,b){function i(b){b=a.trim(b),b&&b.charAt(b.length-1)!="/"&&(b+="/"),!b.match(/^(http(s)?)|(file):/i)&&!g(b,"/")&&(b=h+b);if(g(b,"/")){var c=e.location;b=c.protocol+"//"+c.host+b}var d=b.split("/"),f=[],i;for(var j=0;j<d.length;j++)i=d[j],i!="."&&(i==".."?f.pop():f.push(i));return b=f.join("/"),b.substring(0,b.length-1)}function j(){var b=/^(.*)brix(-min)?\.js[^\/]*/i,c=/brix(-min)?\.js/i,d=e.document.getElementsByTagName("script"),f=d[d.length-1],g=i(f.src),h=f.getAttribute("bx-config");h?h=(new Function("return "+h))():h={},h.comboPrefix=h.comboPrefix||"??",h.comboSep=h.comboSep||",";var j=h.comboPrefix,k=h.comboSep,l=g.split(k),m,n=l[0],o,p=n.indexOf(j);return p==-1?m=g.replace(b,"$1"):(m=n.substring(0,p),o=n.substring(p+2,n.length),o.match(c)?m+=o.replace(b,"$1"):a.each(l,function(a){if(a.match(c))return m+=a.replace(b,"$1"),!1})),m=m.substring(0,m.lastIndexOf("brix")),a.mix({autoConfig:!0,path:m,componentsPath:"./",importsPath:"./",templateEngine:"brix/core/mu"},h)}var c=!1,d=[],e=window,f=e.location,g=a.startsWith,h=f.href.replace(f.hash,"").replace(/[^\/]*$/i,"");b=e[b]=e[b]||{};var k=j(),l="",m="20121226",n="2.0",o=!1;a.mix(b,{config:function(c){if(o)return;o=!0,c=a.merge({debug:l=="@DEBUG@"?!0:!1,tag:m=="@TAG@"?"":m,fixed:n=="@VERSION@"?"":n+"/",gallery:{}},k,c),c.fixed=="@VERSION@"&&(c.fixed=""),b.basePath=c.path,b.fixed=c.fixed,b.templateEngine=c.templateEngine,a.config({packages:[{name:"brix",path:c.path,tag:c.tag,charset:"utf-8"},{name:"components",path:c.componentsPath,tag:c.componentsTag||c.tag,charset:"utf-8"},{name:"imports",path:c.importsPath,tag:c.importsTag||c.tag,charset:"utf-8"}]}),a.config({map:[[/(.+brix\/)(gallery\/)(.+?)(\/.+?(?:-min)?\.(?:js|css))(\?[^?]+)?$/,function(a,b,d,e,f,g){var h=b+c.fixed+d+e;return c.gallery[e]&&(h+="/"+c.gallery[e]),c.debug&&(f=f.replace("-min","")),h+=f+(g?g:""),h}],[/(.+brix\/)(core.+?)((?:-min)?\.js)(\?[^?]+)?$/,function(a,b,d,e,f){var g=b+c.fixed;return c.debug&&(e=e.replace("-min","")),g+=d+e+(f?f:""),g}]]})},ready:function(a){c?a.call(b):d.push(a)},_bx_fireReady:function(){if(c)return;c=!0;if(d){var a,e=0;while(a=d[e++])a.call(b);d=null}}});if(k.autoConfig){b.config({});if(k.autoPagelet){a.later(function(){a.use("brix/core/pagelet",function(a,c){a.ready(function(){b.pagelet=new c({tmpl:"body"}),b._bx_fireReady()})})},1);return}}a.ready(function(){b._bx_fireReady()})})(KISSY,"Brix"),KISSY.add("brix/core/mustache",function(a){var b=typeof module!="undefined"&&module.exports||{};return function(a){function i(a){return h.test(a)}function n(a){return String(a).replace(/&(?!\w+;)|[<>"']/g,function(a){return m[a]||a})}function o(a,b,c,d){d=d||"<template>";var e=b.split("\n"),f=Math.max(c-3,0),g=Math.min(e.length,c+3),h=e.slice(f,g),i;for(var j=0,k=h.length;j<k;++j)i=j+f+1,h[j]=(i===c?" >> ":"    ")+h[j];return a.template=b,a.line=c,a.file=d,a.message=[d+":"+c,h.join("\n"),"",a.message].join("\n"),a}function p(a,b,c){if(a===".")return b[b.length-1];var d=a.split("."),e=d.length-1,f=d[e],g,h,i=b.length,j,k;while(i){k=b.slice(0),h=b[--i],j=0;while(j<e){h=h[d[j++]];if(h==null)break;k.push(h)}if(h&&typeof h=="object"&&f in h){g=h[f];break}}return typeof g=="function"&&(g=g.call(k[k.length-1])),g==null?c:g}function q(a,b,c,d){var e="",h=p(a,b);if(d){if(h==null||h===!1||f(h)&&h.length===0)e+=c()}else if(f(h))g(h,function(a){b.push(a),e+=c(),b.pop()});else if(typeof h=="object")b.push(h),e+=c(),b.pop();else if(typeof h=="function"){var i=b[b.length-1],j=function(a){return w(a,i)};e+=h.call(i,c(),j)||""}else h&&(e+=c());return e}function r(b,c){c=c||{};var d=c.tags||a.tags,e=d[0],f=d[d.length-1],g=['var buffer = "";',"\nvar line = 1;","\ntry {",'\nbuffer += "'],h=[],k=!1,l=!1,m=function(){if(k&&!l&&!c.space)while(h.length)g.splice(h.pop(),1);else h=[];k=!1,l=!1},n=[],p,q,r,s=function(a){d=j(a).split(/\s+/),q=d[0],r=d[d.length-1]},t=function(a){g.push('";',p,'\nvar partial = partials["'+j(a)+'"];',"\nif (partial) {","\n  buffer += render(partial,stack[stack.length - 1],partials);","\n}",'\nbuffer += "')},u=function(a,d){var e=j(a);if(e==="")throw o(new Error("Section name may not be empty"),b,z,c.file);n.push({name:e,inverted:d}),g.push('";',p,'\nvar name = "'+e+'";',"\nvar callback = (function () {","\n  return function () {",'\n    var buffer = "";','\nbuffer += "')},v=function(a){u(a,!0)},w=function(a){var d=j(a),e=n.length!=0&&n[n.length-1].name;if(!e||d!=e)throw o(new Error('Section named "'+d+'" was never opened'),b,z,c.file);var f=n.pop();g.push('";',"\n    return buffer;","\n  };","\n})();"),f.inverted?g.push("\nbuffer += renderSection(name,stack,callback,true);"):g.push("\nbuffer += renderSection(name,stack,callback);"),g.push('\nbuffer += "')},x=function(a){g.push('";',p,'\nbuffer += lookup("'+j(a)+'",stack,"");','\nbuffer += "')},y=function(a){g.push('";',p,'\nbuffer += escapeHTML(lookup("'+j(a)+'",stack,""));','\nbuffer += "')},z=1,A,B;for(var C=0,D=b.length;C<D;++C)if(b.slice(C,C+e.length)===e){C+=e.length,A=b.substr(C,1),p="\nline = "+z+";",q=e,r=f,k=!0;switch(A){case"!":C++,B=null;break;case"=":C++,f="="+f,B=s;break;case">":C++,B=t;break;case"#":C++,B=u;break;case"^":C++,B=v;break;case"/":C++,B=w;break;case"{":f="}"+f;case"&":C++,l=!0,B=x;break;default:l=!0,B=y}var E=b.indexOf(f,C);if(E===-1)throw o(new Error('Tag "'+e+'" was not closed properly'),b,z,c.file);var F=b.substring(C,E);B&&B(F);var G=0;while(~(G=F.indexOf("\n",G)))z++,G++;C=E+f.length-1,e=q,f=r}else{A=b.substr(C,1);switch(A){case'"':case"\\":l=!0,g.push("\\"+A);break;case"\r":break;case"\n":h.push(g.length),g.push("\\n"),m(),z++;break;default:i(A)?h.push(g.length):l=!0,g.push(A)}}if(n.length!=0)throw o(new Error('Section "'+n[n.length-1].name+'" was not closed properly'),b,z,c.file);m(),g.push('";',"\nreturn buffer;","\n} catch (e) { throw {error: e, line: line}; }");var H=g.join("").replace(/buffer \+= "";\n/g,"");return c.debug&&(typeof console!="undefined"&&console.log?console.log(H):typeof print=="function"&&print(H)),H}function s(a,b){var c="view,partials,stack,lookup,escapeHTML,renderSection,render",d=r(a,b),e=new Function(c,d);return function(c,d){d=d||{};var f=[c];try{return e(c,d,f,p,n,q,w)}catch(g){throw o(g.error,a,g.line,b.file)}}}function u(){t={}}function v(a,b){return b=b||{},b.cache!==!1?(t[a]||(t[a]=s(a,b)),t[a]):s(a,b)}function w(a,b,c){return v(a)(b,c)}a.name="mustache.js",a.version="0.5.0-dev",a.tags=["{{","}}"],a.parse=r,a.compile=v,a.render=w,a.clearCache=u,a.to_html=function(a,b,c,d){var e=w(a,b,c);if(typeof d=="function")d(e);else return e};var b=Object.prototype.toString,c=Array.isArray,d=Array.prototype.forEach,e=String.prototype.trim,f;c?f=c:f=function(a){return b.call(a)==="[object Array]"};var g;d?g=function(a,b,c){return d.call(a,b,c)}:g=function(a,b,c){for(var d=0,e=a.length;d<e;++d)b.call(c,a[d],d,a)};var h=/^\s*$/,j;if(e)j=function(a){return a==null?"":e.call(a)};else{var k,l;i("\u00a0")?(k=/^\s+/,l=/\s+$/):(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),j=function(a){return a==null?"":String(a).replace(k,"").replace(l,"")}}var m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},t={}}(b),b}),KISSY.add("brix/core/mu",function(a,b){function c(a,b){var c=d(a),f="";for(var g=0;g<c.length;g++){f="if("+c[g]+")";if(b[f])continue;b[f]=e(c[g])}}function d(a){var b=/\{{2,3}[\^#]?if\((.*?)\)\}{2,3}?/ig,c=/\{{2,3}[\^#]?if\((.*?)\)\}{2,3}?/i,d=a.match(b),e=[];if(d)for(var f=0;f<d.length;f++)e.push(d[f].match(c)[1]);return e}function e(a){a=a.split("==");var b=function(){var b=a[0].split("."),c=a[1],d=this;for(var e=b.length-1;e>-1;e--){var f=b.slice(e),g=d;try{for(var h=0;h<f.length-1;h++)g=g[f[h]];if(f[f.length-1]in g)return g[f[f.length-1]].toString()===c?!0:!1}catch(i){}}return!1};return b}function f(a,b){var c,d;for(c in a)d=a[c],d instanceof Array?g(d):typeof d=="object"&&b<5&&f(d,b+1)}function g(a){for(var b=0;b<a.length;b++){var c=a[b];typeof c=="object"&&(b===0?c.__first__=!0:b===a.length-1?c.__last__=!0:c.__mid__=!0,c.__index__=b)}}return{to_html:function(a,d){return typeof d=="object"&&f(d,0),a=a.replace(/(\{{2,3})@if/ig,"$1#if"),c(a,d),b.to_html.apply(this,arguments)},name:b.name,version:b.version,tags:b.tags,parse:b.parse,compile:b.compile,render:b.render,clearCache:b.clearCache}},{requires:["./mustache"]}),KISSY.add("brix/core/tmpler",function(a,b,c){function e(a,b){this.tmpls=[],a&&b!==!1?this._bx_praseTmpl(a,b):this.tmpl=a}var d=c.all;return a.augment(e,{_bx_praseTmpl:function(a,b){var c=this,e=!1,f,g;if(typeof a=="string"){if(a.charAt(0)==="."||a.charAt(0)==="#"||a==="body")f=d(a)}else f=a;f&&(f.item(0)[0].nodeName.toUpperCase()=="SCRIPT"?a=f.item(0).html():e=!0);if(!e){var h="<([\\w]+)\\s+[^>]*?bx-tmpl=[\"']?([^\"'\\s]+)[\"']?\\s+[^>]*?bx-datakey=[\"']?([^\"'\\s]+)[\"']?[^>]*?>(@brix@)</\\1>";while(b--)h=h.replace("@brix@","(?:<\\1[^>]*>@brix@</\\1>|[\\s\\S])*?");h=h.replace("@brix@","(?:[\\s\\S]*?)"),c.reg=h,c.tmpl=a,c._bx_buildTmpls(c.tmpl)}c.inDom=e},_bx_buildTmpls:function(a){var b=this,c=new RegExp(b.reg,"ig"),d;while((d=c.exec(a))!==null)b.tmpls.push({name:d[2],datakey:d[3],tmpler:new e(d[4],!1)}),b._bx_buildTmpls(d[4])},addTmpl:function(a,b,c){var d=this;d.tmpls.push({name:a,datakey:b,tmpler:new e(c,!1)})},getTmpl:function(){return this.tmpl},render:function(a){return typeof b=="function"?(new b(this.getTmpl())).render(a):b.render(this.getTmpl(),a)}}),e},{requires:[Brix.templateEngine,"node","sizzle"]}),KISSY.add("brix/core/dataset",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}return c.ATTRS={data:{}},a.extend(c,b,{setRenderer:function(a,b,c){var d=this,e=d.get("data"),f,g;c=c?c+"_":"";if(a){var h=function(d,f){var g=c+d+"_"+f,h=a[d][f];e[g]=function(){return h.call(this,b,d)}};for(f in a)for(g in a[f])h(f,g)}}}),c},{requires:["base"]}),KISSY.add("brix/core/chunk",function(a,b,c,d,e,f){var g=b.all,h=a.noop,i=d.extend({constructor:function j(){var a=this;j.superclass.constructor.apply(a,arguments);var b=a.get("tmpler");(a.get("autoRender")||!b||b.inDom)&&a.render()},bindInternal:h,syncInternal:h,initializer:function(){var a=this,b=a.get("tmpl");if(b){a._bx_buildTmpler(b,a.get("level"));var c=a.get("tmpler");c&&(a._bx_buildDataset(a.get("data")),c.inDom&&a.set("el",b))}},_bx_buildTmpler:function(a,b){var c=this;if(!c.get("isBuidTmpler")){c.set("isBuidTmpler",!0);var d=new f(a,b);c.set("tmpler",d)}},_bx_buildDataset:function(b){var c=this;if(!c.get("isBuidDataset")){c.set("isBuidDataset",!0),b=b||{},b=a.clone(b);var d=new e({data:b});c.set("dataset",d),d.on("afterDataChange",function(a){c._bx_render(a.subAttrName,a.newVal)})}},destructor:function(){var a=this,b=a.get("tmpler"),c=a.get("dataset");b&&(a.set("tmpler",null),delete b.tmpls),c&&(a.set("dataset",null),c.detach())},bindUI:h,syncUI:h,addTmpl:function(a,b,c){var d=this;d._bx_buildTmpler("",!1),d._bx_buildDataset();if(a){var e=d.get("tmpler");e.addTmpl(a,b,c)}},setChunkData:function(b,c,d){var e=this,f=e.get("dataset");f&&(c=a.clone(c),f.set("data."+b,c,d))},render:function(){var a=this;if(!a.get("rendered")){a.fire("beforeRenderUI");var b=a.get("dataset");b&&a._bx_render("data",b.get("data")),a.fire("afterRenderUI"),a.setInternal("rendered",!0),a.fire("beforeBindUI"),i.superclass.bindInternal.call(a),a.callMethodByHierarchy("bindUI","__bindUI"),a.callMethodByHierarchy("initialize","constructor"),a.fire("afterBindUI"),a.fire("beforeSyncUI"),i.superclass.syncInternal.call(a),a.callMethodByHierarchy("syncUI","__syncUI"),a.fire("afterSyncUI")}return a},_bx_render:function(d,e){var f=this,h=f.get("tmpler");if(h)if(d.split(".").length>1)f.get("rendered")&&(d=d.replace(/^data\./,""),f._bx_renderTmpl(h.tmpls,d,e));else if(!h.inDom){var i=f.get("container"),j=f.get("el"),k=a.trim(h.render(e)),l;if(!j||j.length===0){var m="brix_"+a.guid();if(c.ie<=8){l=new b("<div />"),i.append(l),l.html(k);var n=l[0].childNodes;if(n.length>1)l.attr("id",m);else{m=n[0].id||m,n[0].id=m;while(n.length>0)i[0].appendChild(n[0]);l.remove(),l=null}}else l=new b(k),l.length>1?l=g('<div id="'+m+'"></div>').append(l):(m=l.attr("id")||m,l.attr("id",m)),i.append(l);f.set("el","#"+m)}else if(c.ie<=8){l=new b("<div />"),i.append(l),l.html(k);while(l[0].childNodes.length>0)i[0].appendChild(l[0].childNodes[0]);l.remove(),l=null}else i.append(k)}},_bx_renderTmpl:function(b,c,d){var e=this,f=e.get("el");a.each(b,function(b){if((","+b.datakey+",").indexOf(","+c+",")>=0){var g=f.all("[bx-tmpl="+b.name+"]");f.attr("bx-tmpl")==b.name&&(g=f.add(g)),g.each(function(c){if(c.attr("bx-datakey")==b.datakey){var f={};a.each(b.datakey.split(","),function(a){var b=d,c=a.split("."),e=c.length,g=0;while(g!==e)b=b[c[g]],g++;f[c[e-1]]=b,b=null}),a.each(d,function(b,c){a.isFunction(b)&&(f[c]=b)}),e.fire("beforeRefreshTmpl",{node:c}),c.html(a.trim(b.tmpler.render(f))),e.fire("afterRefreshTmpl",{node:c}),f=null}}),g=null}})}},{ATTRS:{el:{getter:function(b){return a.isString(b)&&(b=g(b)),b}},destroyAction:{value:"remove"},container:{value:"body",getter:function(b){return a.isString(b)&&(b=g(b)),b}},tmpl:{value:!1},tmpler:{value:!1},rendered:{value:!1},autoRender:{value:!0},data:{value:!1},dataset:{value:!1},level:{value:3}}});return i},{requires:["node","ua","rich-base","./dataset","./tmpler"]}),KISSY.add("brix/core/brick",function(a,b,c){var d=b.extend({initializer:function(){var a=this,b=a.constructor;while(b){var c=b.RENDERERS;c&&(a.addTmpl(),a.get("dataset").setRenderer(c,a)),b=b.superclass&&b.superclass.constructor}a.pagelet=a.get("pagelet")},bindUI:function(){var a=this;a._bx_bindEvent()},_bx_detachEvent:function(){var a=this,b=a.constructor;while(b){var c=b.EVENTS;c&&a._bx_removeEvents(c);var d=b.DOCEVENTS;d&&a._bx_removeEvents(d,document),b=b.superclass&&b.superclass.constructor}var e=a.get("events");e&&this._bx_removeEvents(e)},_bx_bindEvent:function(){var a=this,b=a.constructor;while(b){var c=b.EVENTS;c&&this._bx_addEvents(c);var d=b.DOCEVENTS;d&&this._bx_addEvents(d,document),b=b.superclass&&b.superclass.constructor}var e=a.get("events");e&&this._bx_addEvents(e)},_bx_removeEvents:function(a,b){b=b||this.get("el");for(var d in a){var e=a[d];for(var f in e){var g=e[f];d===""?c.detach(b,f,g,this):c.undelegate(b,f,d,g,this)}}},_bx_addEvents:function(a,b){b=b||this.get("el");for(var d in a){var e=a[d];for(var f in e){var g=e[f];d===""?c.on(b,f,g,this):c.delegate(b,f,d,g,this)}}},destructor:function(){var a=this;if(a.get("rendered")){a._bx_detachEvent();var b=a.get("destroyAction"),c=a.get("el");switch(b){case"remove":c.remove();break;case"empty":c.empty()}}a.get("pagelet")&&a.set("pagelet",null)}},{ATTRS:{pagelet:{value:null}}});return d},{requires:["./chunk","event"]}),KISSY.add("brix/core/pagelet",function(a,b){function c(b){if(!b.attr("id")){var c;while((c=a.guid("brix_brick_"))&&a.one("#"+c));b.attr("id",c)}return b.attr("id")}var d=b.extend({initializer:function(){var a=this;a.isReady=!1,a.readyList=[],a.bricks=[],a.isAddBehavior=!1,a.destroyed=!1},bindUI:function(){var a=this,b=a.get("callback");b&&typeof b=="function"&&a.ready(b),a.get("autoBehavior")&&a.addBehavior()},getBrick:function(b){var c=this,d;return a.each(c.bricks,function(a){if(a.id===b)return d=a.brick,!1}),d||null},destroyBrick:function(a){var b=this;for(var c=0;c<b.bricks.length;c++){var d=b.bricks[c];if(a===d.id)return b._bx_destroyBrick(d),b.bricks.splice(c,1),!1}},_bx_destroyBrick:function(a){a.destroyed=!0,a.brick&&(a.brick.destroy&&a.brick.destroy(),a.brick=null)},addBehavior:function(){var a=this;if(a.get("rendered")&&!a.isAddBehavior){a.isAddBehavior=!0;var b=a.get("el"),c=b.all("[bx-name]");b.hasAttr("bx-name")&&(c=b.add(c)),a._bx_addBehavior(c,function(b){a.bricks=b},function(){a._bx_fireReady(),a.on("beforeRefreshTmpl",function(b){b.node.all("[bx-name]").each(function(b){a.destroyBrick(b.attr("id"))})}),a.on("afterRefreshTmpl",function(b){a._bx_addBehavior(b.node.all("[bx-name]"),function(b){b.length>0&&(a.bricks=a.bricks.concat(b))})})})}},_bx_addBehavior:function(b,d,e){var f=this,g=f.get("config"),h=[];b.each(function(b){var d=c(b),e=b.attr("bx-name"),f=b.attr("bx-path"),i=b.attr("bx-config");i=i?(new Function("return "+i))():{},g&&g[d]&&a.mix(i,g[d]),h.push({id:d,name:e,path:f,config:i})});if(h.length>0){var i=[];a.each(h,function(b){b.path||(b.path="brix/gallery/"+b.name+"/"),a.inArray(i,b.path)||i.push(b.path)}),f.fire("beforeAddBehavior",{useList:i}),d&&d(h),a.use(i.join(","),function(a){if(f.destroyed)return;var b=arguments;a.each(h,function(c){if(!c.destroyed){var d=c.id,e=a.merge({container:"#"+d,el:"#"+d,pagelet:f},c.config),g=b[a.indexOf(c.path,i)+1],h=new g(e);c.brick=h}}),b=null,e&&e()})}else d&&d(h),e&&e()},ready:function(a){this.isReady?a.call(window,this):this.readyList.push(a)},_bx_fireReady:function(){var a=this;if(a.isReady)return;a.isReady=!0;if(a.readyList){var b,c=0;while(b=a.readyList[c++])b.call(a);a.readyList=null}},destructor:function(){var b=this;a.each(b.bricks,function(a,c){b._bx_destroyBrick(a)}),b.bricks=null;if(b.get("rendered")){var c=b.get("destroyAction"),d=b.get("el");switch(c){case"remove":d.remove();break;case"empty":d.empty()}d=null}b.destroyed=!0}},{ATTRS:{autoBehavior:{value:!0},callback:{value:null},config:{value:{}}}},"Pagelet");return d},{requires:["./chunk"]}),KISSY.add("brix/core/demolet",function(a,b,c,d){function g(a){if(f[a])return!1;f[a]=!0,c({url:a,dataType:"text",async:!1,complete:function(a,b,c){b=="success"&&e("<style>"+a+"</style>").appendTo("head")}})}function h(b,d,e){e=e||"@",d=d||{};var f=new RegExp("\\{\\{"+e+"(.+)?\\}\\}","ig");return b=b.replace(f,function(b,e){a.log(e);var f="",g=e.replace(/\//ig,"_").replace(/\./ig,"_");return d[g]=d[g]||{},c({url:e+"template.html",dataType:"html",async:!1,success:function(a,b,c){f="{{#"+g+"}}"+a+"{{/"+g+"}}"}}),c({url:e+"data.json",async:!1,dataType:"json",success:function(a,b,c){for(var e in a)d[g][e]=a[e]}}),f}),{tmpl:b,data:d}}var e=d.all,f={},i=b.extend({initializer:function(){var b=this;b.on("beforeAddBehavior",function(c){a.each(b.get("projectCSS"),function(a){g(a)});var d=c.useList;a.each(d,function(b){if(a.startsWith(b,"brix/"))a.use(b+"index.css");else{var c=3;a.startsWith(b,"imports/")&&(c=5);var d=b.split("/");d.length>c&&(d.splice(d.length-2),g(d.join("/")+"/index.css")),g(b.substring(0,b.lastIndexOf("/"))+"/index.css")}})})}},{ATTRS:{projectCSS:{value:[],setter:function(b){return a.isArray(b)?b:[b]}},s:{value:"@"},tmpl:{setter:function(a){var b=this,c=b.get("data")||{},d=h(a,c,b.get("s"));return b.set("data",d.data),d.tmpl}}}},"Demolet");return i},{requires:["./pagelet","ajax","node"]});