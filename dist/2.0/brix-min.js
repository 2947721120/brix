/*! Brix - v2.0
* https://github.com/etaoux/brix
* Copyright (c) 2013 etaoux; Licensed MIT */ 
(function(e,t){function r(t){if(t=e.trim(t),t&&"/"!=t.charAt(t.length-1)&&(t+="/"),t.match(/^(http(s)?)|(file):/i)||s(t,"/")||(t=l+t),s(t,"/")){var r=o.location;t=r.protocol+"//"+r.host+t}for(var n,a=t.split("/"),i=[],c=0;a.length>c;c++)n=a[c],"."==n||(".."==n?i.pop():i.push(n));return t=i.join("/"),t.substring(0,t.length-1)}function n(){var t=/^(.*)brix(-min)?\.js[^\/]*/i,n=/brix(-min)?\.js/i,a=o.document.getElementsByTagName("script"),i=a[a.length-1],c=r(i.src),s=i.getAttribute("bx-config");s=s?Function("return "+s)():{},s.comboPrefix=s.comboPrefix||"??",s.comboSep=s.comboSep||",";var l,u,f=s.comboPrefix,d=s.comboSep,p=c.split(d),h=p[0],g=h.indexOf(f);return-1==g?l=c.replace(t,"$1"):(l=h.substring(0,g),u=h.substring(g+2,h.length),u.match(n)?l+=u.replace(t,"$1"):e.each(p,function(e){return e.match(n)?(l+=e.replace(t,"$1"),!1):void 0})),l=l.substring(0,l.lastIndexOf("brix")),e.mix({autoConfig:!0,path:l,componentsPath:"./",importsPath:"./",templateEngine:"./mu"},s)}var a=!1,i=[],o=window,c=o.location,s=e.startsWith,l=c.href.replace(c.hash,"").replace(/[^\/]*$/i,"");t=o[t]=o[t]||{};var u=n(),f="",d="20121226",p="2.0",h=!1;return e.mix(t,{config:function(r){h||(h=!0,r=e.merge({debug:"@DEBUG@"==f?!0:!1,combine:!0,tag:"@TAG@"==d?"":d,fixed:"@VERSION@"==p?"":p+"/",gallery:{}},u,r),"@VERSION@"==r.fixed&&(r.fixed=""),t.basePath=r.path,t.fixed=r.fixed,t.templateEngine=r.templateEngine,e.config({packages:[{name:"brix",path:r.path,combine:r.combine,tag:r.tag,charset:"utf-8"},{name:"components",path:r.componentsPath,combine:r.combine,debug:r.debug,tag:r.componentsTag||r.tag,charset:"utf-8"},{name:"imports",path:r.importsPath,combine:r.combine,debug:r.debug,tag:r.importsTag||r.tag,charset:"utf-8"}]}),e.config({map:[[/(.+brix\/)(gallery\/)(.+?)(\/.+?(?:-min)?\.(?:js|css))(\?[^?]+)?$/,function(e,t,n,a,i,o){var c=t+r.fixed+n+a;return r.gallery[a]&&(c+="/"+r.gallery[a]),r.debug&&(i=i.replace("-min","")),c+=i+(o?o:"")}],[/(.+brix\/)(core.+?)((?:-min)?\.js)(\?[^?]+)?$/,function(e,t,n,a,i){var o=t+r.fixed;return r.debug&&(a=a.replace("-min","")),o+=n+a+(i?i:"")}]]}))},ready:function(e){a?e.call(t):i.push(e)},_bx_fireReady:function(){if(!a&&(a=!0,i)){for(var e,r=0;e=i[r++];)e.call(t);i=null}}}),u.autoConfig&&(t.config({}),u.autoPagelet)?(e.later(function(){e.use("brix/core/pagelet",function(e,r){e.ready(function(){t.pagelet=new r({tmpl:"body"}),t._bx_fireReady()})})},1),void 0):(e.ready(function(){t._bx_fireReady()}),void 0)})(KISSY,"Brix"),KISSY.add("brix/core/mustache",function(){var e="undefined"!=typeof module&&module.exports||{};return function(e){function t(e){return m.test(e)}function r(e){return(e+"").replace(/&(?!\w+;)|[<>"']/g,function(e){return _[e]||e})}function n(e,t,r,n){n=n||"<template>";for(var a,i=t.split("\n"),o=Math.max(r-3,0),c=Math.min(i.length,r+3),s=i.slice(o,c),l=0,u=s.length;u>l;++l)a=l+o+1,s[l]=(a===r?" >> ":"    ")+s[l];return e.template=t,e.line=r,e.file=n,e.message=[n+":"+r,s.join("\n"),"",e.message].join("\n"),e}function a(e,t,r){if("."===e)return t[t.length-1];for(var n,a,i,o,c=e.split("."),s=c.length-1,l=c[s],u=t.length;u;){for(o=t.slice(0),a=t[--u],i=0;s>i&&(a=a[c[i++]],null!=a);)o.push(a);if(a&&"object"==typeof a&&l in a){n=a[l];break}}return"function"==typeof n&&(n=n.call(o[o.length-1])),null==n?r:n}function i(e,t,r,n){var i="",o=a(e,t);if(n)(null==o||o===!1||f(o)&&0===o.length)&&(i+=r());else if(f(o))v(o,function(e){t.push(e),i+=r(),t.pop()});else if("object"==typeof o)t.push(o),i+=r(),t.pop();else if("function"==typeof o){var c=t[t.length-1],s=function(e){return u(e,c)};i+=o.call(c,r(),s)||""}else o&&(i+=r());return i}function o(r,a){a=a||{};for(var i,o,c,s,l,u=a.tags||e.tags,f=u[0],d=u[u.length-1],p=['var buffer = "";',"\nvar line = 1;","\ntry {",'\nbuffer += "'],h=[],g=!1,v=!1,m=function(){if(!g||v||a.space)h=[];else for(;h.length;)p.splice(h.pop(),1);g=!1,v=!1},x=[],y=function(e){u=b(e).split(/\s+/),o=u[0],c=u[u.length-1]},_=function(e){p.push('";',i,'\nvar partial = partials["'+b(e)+'"];',"\nif (partial) {","\n  buffer += render(partial,stack[stack.length - 1],partials);","\n}",'\nbuffer += "')},k=function(e,t){var o=b(e);if(""===o)throw n(Error("Section name may not be empty"),r,I,a.file);x.push({name:o,inverted:t}),p.push('";',i,'\nvar name = "'+o+'";',"\nvar callback = (function () {","\n  return function () {",'\n    var buffer = "";','\nbuffer += "')},S=function(e){k(e,!0)},T=function(e){var t=b(e),i=0!=x.length&&x[x.length-1].name;if(!i||t!=i)throw n(Error('Section named "'+t+'" was never opened'),r,I,a.file);var o=x.pop();p.push('";',"\n    return buffer;","\n  };","\n})();"),o.inverted?p.push("\nbuffer += renderSection(name,stack,callback,true);"):p.push("\nbuffer += renderSection(name,stack,callback);"),p.push('\nbuffer += "')},E=function(e){p.push('";',i,'\nbuffer += lookup("'+b(e)+'",stack,"");','\nbuffer += "')},B=function(e){p.push('";',i,'\nbuffer += escapeHTML(lookup("'+b(e)+'",stack,""));','\nbuffer += "')},I=1,R=0,w=r.length;w>R;++R)if(r.slice(R,R+f.length)===f){switch(R+=f.length,s=r.substr(R,1),i="\nline = "+I+";",o=f,c=d,g=!0,s){case"!":R++,l=null;break;case"=":R++,d="="+d,l=y;break;case">":R++,l=_;break;case"#":R++,l=k;break;case"^":R++,l=S;break;case"/":R++,l=T;break;case"{":d="}"+d;case"&":R++,v=!0,l=E;break;default:v=!0,l=B}var A=r.indexOf(d,R);if(-1===A)throw n(Error('Tag "'+f+'" was not closed properly'),r,I,a.file);var j=r.substring(R,A);l&&l(j);for(var U=0;~(U=j.indexOf("\n",U));)I++,U++;R=A+d.length-1,f=o,d=c}else switch(s=r.substr(R,1)){case'"':case"\\":v=!0,p.push("\\"+s);break;case"\r":break;case"\n":h.push(p.length),p.push("\\n"),m(),I++;break;default:t(s)?h.push(p.length):v=!0,p.push(s)}if(0!=x.length)throw n(Error('Section "'+x[x.length-1].name+'" was not closed properly'),r,I,a.file);m(),p.push('";',"\nreturn buffer;","\n} catch (e) { throw {error: e, line: line}; }");var D=p.join("").replace(/buffer \+= "";\n/g,"");return a.debug&&("undefined"!=typeof console&&console.log?console.log(D):"function"==typeof print&&print(D)),D}function c(e,t){var c="view,partials,stack,lookup,escapeHTML,renderSection,render",s=o(e,t),l=Function(c,s);return function(o,c){c=c||{};var s=[o];try{return l(o,c,s,a,r,i,u)}catch(f){throw n(f.error,e,f.line,t.file)}}}function s(){k={}}function l(e,t){return t=t||{},t.cache!==!1?(k[e]||(k[e]=c(e,t)),k[e]):c(e,t)}function u(e,t,r){return l(e)(t,r)}e.name="mustache.js",e.version="0.5.0-dev",e.tags=["{{","}}"],e.parse=o,e.compile=l,e.render=u,e.clearCache=s,e.to_html=function(e,t,r,n){var a=u(e,t,r);return"function"!=typeof n?a:(n(a),void 0)};var f,d=Object.prototype.toString,p=Array.isArray,h=Array.prototype.forEach,g=String.prototype.trim;f=p?p:function(e){return"[object Array]"===d.call(e)};var v;v=h?function(e,t,r){return h.call(e,t,r)}:function(e,t,r){for(var n=0,a=e.length;a>n;++n)t.call(r,e[n],n,e)};var b,m=/^\s*$/;if(g)b=function(e){return null==e?"":g.call(e)};else{var x,y;t("\u00a0")?(x=/^\s+/,y=/\s+$/):(x=/^[\s\xA0]+/,y=/[\s\xA0]+$/),b=function(e){return null==e?"":(e+"").replace(x,"").replace(y,"")}}var _={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},k={}}(e),e}),KISSY.add("brix/core/mu",function(e,t){function r(e,t){for(var r=n(e),i="",o=0;r.length>o;o++)i="if("+r[o]+")",t[i]||(t[i]=a(r[o]))}function n(e){var t=/\{{2,3}[\^#]?if\((.*?)\)\}{2,3}?/gi,r=/\{{2,3}[\^#]?if\((.*?)\)\}{2,3}?/i,n=e.match(t),a=[];if(n)for(var i=0;n.length>i;i++)a.push(n[i].match(r)[1]);return a}function a(e){e=e.split("==");var t=function(){for(var t=e[0].split("."),r=e[1],n=this,a=t.length-1;a>-1;a--){var i=t.slice(a),o=n;try{for(var c=0;i.length-1>c;c++)o=o[i[c]];if(i[i.length-1]in o)return""+o[i[i.length-1]]===r?!0:!1}catch(s){}}return!1};return t}function i(e,t){var r,n;for(r in e)n=e[r],n instanceof Array?o(n):"object"==typeof n&&5>t&&i(n,t+1)}function o(e){for(var t=0;e.length>t;t++){var r=e[t];"object"==typeof r&&(0===t?r.__first__=!0:t===e.length-1?r.__last__=!0:r.__mid__=!0,r.__index__=t)}}return{to_html:function(e,n){return"object"==typeof n&&i(n,0),e=e.replace(/(\{{2,3})@if/gi,"$1#if"),r(e,n),t.to_html.apply(this,arguments)},name:t.name,version:t.version,tags:t.tags,parse:t.parse,compile:t.compile,render:t.render,clearCache:t.clearCache}},{requires:["./mustache"]}),KISSY.add("brix/core/tmpler",function(e,t,r){function n(e,t){this.tmpls=[],e&&t!==!1?this._bx_praseTmpl(e,t):this.tmpl=e}var a=r.all;return e.augment(n,{_bx_praseTmpl:function(e,t){var r,n=this,i=!1;if("string"==typeof e?("."===e.charAt(0)||"#"===e.charAt(0)||"body"===e)&&(r=a(e)):r=e,r&&("SCRIPT"==r.item(0)[0].nodeName.toUpperCase()?e=r.item(0).html():i=!0),!i){for(var o="<([\\w]+)\\s+[^>]*?bx-tmpl=[\"']?([^\"'\\s]+)[\"']?\\s+[^>]*?bx-datakey=[\"']?([^\"'\\s]+)[\"']?[^>]*?>(@brix@)</\\1>";t--;)o=o.replace("@brix@","(?:<\\1[^>]*>@brix@</\\1>|[\\s\\S])*?");o=o.replace("@brix@","(?:[\\s\\S]*?)"),n.reg=o,n.tmpl=e,n._bx_buildTmpls(n.tmpl)}n.inDom=i},_bx_buildTmpls:function(e){for(var t,r=this,a=RegExp(r.reg,"ig");null!==(t=a.exec(e));)r.tmpls.push({name:t[2],datakey:t[3],tmpler:new n(t[4],!1)}),r._bx_buildTmpls(t[4])},addTmpl:function(e,t,r){var a=this;a.tmpls.push({name:e,datakey:t,tmpler:new n(r,!1)})},getTmpl:function(){return this.tmpl},render:function(e){return"function"==typeof t?new t(this.getTmpl()).render(e):t.render(this.getTmpl(),e)}}),n},{requires:[Brix.templateEngine,"node","sizzle"]}),KISSY.add("brix/core/dataset",function(e,t){function r(){r.superclass.constructor.apply(this,arguments)}return r.ATTRS={data:{}},e.extend(r,t,{setRenderer:function(e,t,r){var n,a,i=this,o=i.get("data");if(r=r?r+"_":"",e){var c=function(n,a){var i=r+n+"_"+a,c=e[n][a];o[i]=function(){return c.call(this,t,n)}};for(n in e)for(a in e[n])c(n,a)}}}),r},{requires:["base"]}),KISSY.add("brix/core/chunk",function(e,t,r,n,a,i){var o=t.all,c=e.noop,s=n.extend({constructor:function s(){var e=this;s.superclass.constructor.apply(e,arguments);var t=e.get("tmpler");(e.get("autoRender")||!t||t.inDom)&&e.render()},bindInternal:c,syncInternal:c,initializer:function(){var e=this,t=e.get("tmpl");if(t){e._bx_buildTmpler(t,e.get("level"));var r=e.get("tmpler");r&&(e._bx_buildDataset(e.get("data")),r.inDom&&e.set("el",t))}},_bx_buildTmpler:function(e,t){var r=this;if(!r.get("isBuidTmpler")){r.set("isBuidTmpler",!0);var n=new i(e,t);r.set("tmpler",n)}},_bx_buildDataset:function(t){var r=this;if(!r.get("isBuidDataset")){r.set("isBuidDataset",!0),t=t||{},t=e.clone(t);var n=new a({data:t});r.set("dataset",n),n.on("afterDataChange",function(e){r._bx_render(e.subAttrName,e.newVal)})}},destructor:function(){var e=this,t=e.get("tmpler"),r=e.get("dataset");t&&(e.set("tmpler",null),delete t.tmpls),r&&(e.set("dataset",null),r.detach())},bindUI:c,syncUI:c,addTmpl:function(e,t,r){var n=this;if(n._bx_buildTmpler("",!1),n._bx_buildDataset(),e){var a=n.get("tmpler");a.addTmpl(e,t,r)}},setChunkData:function(t,r,n){var a=this,i=a.get("dataset");i&&(r=e.clone(r),i.set("data."+t,r,n))},render:function(){var e=this;if(!e.get("rendered")){e.fire("beforeRenderUI");var t=e.get("dataset");t&&e._bx_render("data",t.get("data")),e.fire("afterRenderUI"),e.setInternal("rendered",!0),e.fire("beforeBindUI"),s.superclass.bindInternal.call(e),e.callMethodByHierarchy("bindUI","__bindUI"),e.callMethodByHierarchy("initialize","constructor"),e.fire("afterBindUI"),e.fire("beforeSyncUI"),s.superclass.syncInternal.call(e),e.callMethodByHierarchy("syncUI","__syncUI"),e.fire("afterSyncUI")}return e},_bx_render:function(n,a){var i=this,c=i.get("tmpler");if(c)if(n.split(".").length>1)i.get("rendered")&&(n=n.replace(/^data\./,""),i._bx_renderTmpl(c.tmpls,n,a));else if(!c.inDom){var s,l=i.get("container"),u=i.get("el"),f=e.trim(c.render(a));if(u&&0!==u.length)if(8>=r.ie){for(s=new t("<div />"),l.append(s),s.html(f);s[0].childNodes.length>0;)l[0].appendChild(s[0].childNodes[0]);s.remove(),s=null}else l.append(f);else{var d="brix_"+e.guid();if(8>=r.ie){s=new t("<div />"),l.append(s),s.html(f);var p=s[0].childNodes;if(p.length>1)s.attr("id",d);else{for(d=p[0].id||d,p[0].id=d;p.length>0;)l[0].appendChild(p[0]);s.remove(),s=null}}else s=new t(f),s.length>1?s=o('<div id="'+d+'"></div>').append(s):(d=s.attr("id")||d,s.attr("id",d)),l.append(s);i.set("el","#"+d)}}},_bx_renderTmpl:function(t,r,n){var a=this,i=a.get("el");e.each(t,function(t){if((","+t.datakey+",").indexOf(","+r+",")>=0){var o=i.all("[bx-tmpl="+t.name+"]");i.attr("bx-tmpl")==t.name&&(o=i.add(o)),o.each(function(r){if(r.attr("bx-datakey")==t.datakey){var i={};e.each(t.datakey.split(","),function(e){for(var t=n,r=e.split("."),a=r.length,o=0;o!==a;)t=t[r[o]],o++;i[r[a-1]]=t,t=null}),e.each(n,function(t,r){e.isFunction(t)&&(i[r]=t)}),a.fire("beforeRefreshTmpl",{node:r}),r.html(e.trim(t.tmpler.render(i))),a.fire("afterRefreshTmpl",{node:r}),i=null}}),o=null}})}},{ATTRS:{el:{getter:function(t){return e.isString(t)&&(t=o(t)),t}},destroyAction:{value:"remove"},container:{value:"body",getter:function(t){return e.isString(t)&&(t=o(t)),t}},tmpl:{value:!1},tmpler:{value:!1},rendered:{value:!1},autoRender:{value:!0},data:{value:!1},dataset:{value:!1},level:{value:3}}});return s},{requires:["node","ua","rich-base","./dataset","./tmpler"]}),KISSY.add("brix/core/brick",function(e,t,r){var n=t.extend({initializer:function(){for(var e=this,t=e.constructor;t;){var r=t.RENDERERS;r&&(e.addTmpl(),e.get("dataset").setRenderer(r,e)),t=t.superclass&&t.superclass.constructor}e.pagelet=e.get("pagelet")},bindUI:function(){var e=this;e._bx_bindEvent()},_bx_detachEvent:function(){for(var e=this,t=e.constructor;t;){var r=t.EVENTS;r&&e._bx_removeEvents(r);var n=t.DOCEVENTS;n&&e._bx_removeEvents(n,document),t=t.superclass&&t.superclass.constructor}var a=e.get("events");a&&this._bx_removeEvents(a)},_bx_bindEvent:function(){for(var e=this,t=e.constructor;t;){var r=t.EVENTS;r&&this._bx_addEvents(r);var n=t.DOCEVENTS;n&&this._bx_addEvents(n,document),t=t.superclass&&t.superclass.constructor}var a=e.get("events");a&&this._bx_addEvents(a)},_bx_removeEvents:function(e,t){t=t||this.get("el");for(var n in e){var a=e[n];for(var i in a){var o=a[i];""===n?r.detach(t,i,o,this):r.undelegate(t,i,n,o,this)}}},_bx_addEvents:function(e,t){t=t||this.get("el");for(var n in e){var a=e[n];for(var i in a){var o=a[i];""===n?r.on(t,i,o,this):r.delegate(t,i,n,o,this)}}},destructor:function(){var e=this;if(e.get("rendered")){e._bx_detachEvent();var t=e.get("destroyAction"),r=e.get("el");switch(t){case"remove":r.remove();break;case"empty":r.empty()}}e.get("pagelet")&&(delete e.pagelet,e.set("pagelet",null))}},{ATTRS:{pagelet:{value:null}}},"Brick");return n},{requires:["./chunk","event"]}),KISSY.add("brix/core/pagelet",function(e,t){function r(t){if(!t.attr("id")){for(var r;(r=e.guid("brix_brick_"))&&e.one("#"+r););t.attr("id",r)}return t.attr("id")}var n=t.extend({initializer:function(){var e=this;e.isReady=!1,e.readyList=[],e.bricks=[],e.isAddBehavior=!1,e.destroyed=!1},bindUI:function(){var e=this,t=e.get("callback");t&&"function"==typeof t&&e.ready(t),e.get("autoBehavior")&&e.addBehavior()},getBrick:function(t){var r,n=this;return e.each(n.bricks,function(e){return e.id===t?(r=e.brick,!1):void 0}),r||null},destroyBrick:function(e){for(var t=this,r=0;t.bricks.length>r;r++){var n=t.bricks[r];if(e===n.id)return t._bx_destroyBrick(n),t.bricks.splice(r,1),!1}},_bx_destroyBrick:function(e){e.destroyed=!0,e.brick&&(e.brick.destroy&&e.brick.destroy(),e.brick=null)},addBehavior:function(){var e=this;if(e.get("rendered")&&!e.isAddBehavior){e.isAddBehavior=!0;var t=e.get("el"),r=t.all("[bx-name]");t.hasAttr("bx-name")&&(r=t.add(r)),e._bx_addBehavior(r,function(t){e.bricks=t},function(){e._bx_fireReady(),e.on("beforeRefreshTmpl",function(t){t.node.all("[bx-name]").each(function(t){e.destroyBrick(t.attr("id"))})}),e.on("afterRefreshTmpl",function(t){e._bx_addBehavior(t.node.all("[bx-name]"),function(t){t.length>0&&(e.bricks=e.bricks.concat(t))})})})}},_bx_addBehavior:function(t,n,a){var i=this,o=i.get("config"),c=[];if(t.each(function(t){var n=r(t),a=t.attr("bx-name"),i=t.attr("bx-path"),s=t.attr("bx-config");s=s?Function("return "+s)():{},o&&o[n]&&e.mix(s,o[n]),c.push({id:n,name:a,path:i,config:s})}),c.length>0){var s=[];e.each(c,function(t){t.path||(t.path="brix/gallery/"+t.name+"/"),e.inArray(s,t.path)||t.config.autoBrick||s.push(t.path)}),i.fire("beforeAddBehavior",{useList:s}),n&&n(c),e.use(s.join(","),function(e){if(!i.destroyed){var t=arguments;e.each(c,function(r){if(!r.destroyed&&!r.config.autoBrick){var n=r.id,a=e.merge({container:"#"+n,el:"#"+n,pagelet:i},r.config),o=t[e.indexOf(r.path,s)+1],c=new o(a);r.brick=c}}),t=null,a&&a()}})}else n&&n(c),a&&a()},ready:function(e){this.isReady?e.call(window,this):this.readyList.push(e)},_bx_fireReady:function(){var e=this;if(!e.isReady&&(e.isReady=!0,e.readyList)){for(var t,r=0;t=e.readyList[r++];)t.call(e);e.readyList=null}},destructor:function(){var t=this;if(e.each(t.bricks,function(e){t._bx_destroyBrick(e)}),t.bricks=null,t.get("rendered")){var r=t.get("destroyAction"),n=t.get("el");switch(r){case"remove":n.remove();break;case"empty":n.empty()}n=null}t.destroyed=!0}},{ATTRS:{autoBehavior:{value:!0},callback:{value:null},config:{value:{}}}},"Pagelet");return n},{requires:["./chunk"]}),KISSY.add("brix/core/demolet",function(e,t,r,n){function a(e){return c[e]?!1:(c[e]=!0,r({url:e,dataType:"text",async:!1,complete:function(e,t){"success"==t&&o("<style>"+e+"</style>").appendTo("head")}}),void 0)}function i(t,n,a){a=a||"@",n=n||{};var i=RegExp("\\{\\{"+a+"(.+)?\\}\\}","ig");return t=t.replace(i,function(t,a){e.log(a);var i="",o=a.replace(/\//gi,"_").replace(/\./gi,"_");return n[o]=n[o]||{},r({url:a+"template.html",dataType:"html",async:!1,success:function(e){i="{{#"+o+"}}"+e+"{{/"+o+"}}"}}),r({url:a+"data.json",async:!1,dataType:"json",success:function(e){for(var t in e)n[o][t]=e[t]}}),i}),{tmpl:t,data:n}}var o=n.all,c={},s=t.extend({initializer:function(){var t=this;t.on("beforeAddBehavior",function(r){e.each(t.get("projectCSS"),function(e){a(e)});var n=r.useList;e.each(n,function(t){if(e.startsWith(t,"brix/"))e.use(t+"index.css");else{var r=3;e.startsWith(t,"imports/")&&(r=5);var n=t.split("/");n.length>r&&(n.splice(n.length-2),a(n.join("/")+"/index.css")),a(t.substring(0,t.lastIndexOf("/"))+"/index.css")}})})}},{ATTRS:{projectCSS:{value:[],setter:function(t){return e.isArray(t)?t:[t]}},s:{value:"@"},tmpl:{setter:function(e){var t=this,r=t.get("data")||{},n=i(e,r,t.get("s"));return t.set("data",n.data),n.tmpl}}}},"Demolet");return s},{requires:["./pagelet","ajax","node"]});