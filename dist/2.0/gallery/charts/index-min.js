KISSY.add("brix/gallery/charts/index",function(a,b,c){function f(){var b=this;f.superclass.constructor.apply(b,arguments),a.one(window).on("resize",function(a){b.resize()}),b.init()}var d=c.all,e=0;return f.ATTRS={w:{value:100},h:{value:100},mainDiv:{value:null},url_svg:{value:"brix/gallery/charts/js/case"},url_swf:{value:"brix/gallery/charts/as/case"},path_swf:{value:Brix.basePath+"brix/"+Brix.fixed+"gallery/charts/as/case.swf"},mainDiv_id:{value:"J_Charts_"},swfDiv:{value:null},swfDiv_id:{value:"J_SWF_"},_case:{value:null},_resize_index:{value:0}},a.extend(f,b,{init:function(){var b=this;window.SVGAngle||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?e=0:e=1;if(a.UA.shell=="maxthon"||a.UA.shell=="ie")e=1;b.set("w",d("#"+b.get("parent_id")).width()),b.set("h",d("#"+b.get("parent_id")).height()),b.set("mainDiv",d("<div></div>")),b.set("mainDiv_id",b.get("mainDiv_id")+b.get("parent_id")),b.get("mainDiv").attr("id",b.get("mainDiv_id"));var c={width:b.get("w"),height:b.get("h"),position:"relative"};b.get("mainDiv").css(c),d("#"+b.get("parent_id")).append(b.get("mainDiv"));if(e){b.set("swfDiv",d("<div></div>")),b.set("swfDiv_id",b.get("swfDiv_id")+b.get("parent_id")),b.get("swfDiv").attr("id",b.get("swfDiv_id"));var c={width:b.get("w"),height:b.get("h")};b.get("swfDiv").css(c),b.get("mainDiv").append(b.get("swfDiv")),a.use(b.get("url_swf"),function(a,c){b.set("_case",new c({path:b.get("path_swf"),parent_id:b.get("swfDiv_id"),config:b.get("config")}))})}else a.use(b.get("url_svg"),function(a,c){b.set("_case",new c({parent_id:b.get("mainDiv_id"),configData:b.get("config").configData,chartData:b.get("config").chartData}))})},actions:function(a,b){var c=this;c.get("_case").actions(a,b)},resize:function(){var a=this;a.set("_resize_index",a.get("_resize_index")+1);if(a.get("_resize_index")%2==0){a.set("w",d("#"+a.get("parent_id")).width()),a.set("h",d("#"+a.get("parent_id")).height());var b={width:a.get("w"),height:a.get("h"),position:"relative"};a.get("mainDiv").css(b);if(e){var b={width:a.get("w"),height:a.get("h")};a.get("swfDiv").css(b)}else a.get("_case").actions("reset")}}}),f},{requires:["base","node"]});