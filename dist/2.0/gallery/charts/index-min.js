KISSY.add("brix/gallery/charts/index",function(e,t,i){function n(){var t=this;n.superclass.constructor.apply(t,arguments),e.one(window).on("resize",function(){t.resize()}),t.init()}var a=i.all,r=0;return n.ATTRS={w:{value:100},h:{value:100},mainDiv:{value:null},url_svg:{value:"brix/gallery/charts/js/case"},url_swf:{value:"brix/gallery/charts/as/case"},path_swf:{value:Brix.basePath+"brix/"+Brix.fixed+"gallery/charts/as/case.swf"},mainDiv_id:{value:"J_Charts_"},swfDiv:{value:null},swfDiv_id:{value:"J_SWF_"},_case:{value:null},_resize_index:{value:0}},e.extend(n,t,{init:function(){var t=this;r=window.SVGAngle||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?0:1,("maxthon"==e.UA.shell||"ie"==e.UA.shell)&&(r=1),t.set("w",a("#"+t.get("parent_id")).width()),t.set("h",a("#"+t.get("parent_id")).height()),t.set("mainDiv",a("<div></div>")),t.set("mainDiv_id",t.get("mainDiv_id")+t.get("parent_id")),t.get("mainDiv").attr("id",t.get("mainDiv_id"));var i={width:t.get("w"),height:t.get("h"),position:"relative"};if(t.get("mainDiv").css(i),a("#"+t.get("parent_id")).append(t.get("mainDiv")),r){t.set("swfDiv",a("<div></div>")),t.set("swfDiv_id",t.get("swfDiv_id")+t.get("parent_id")),t.get("swfDiv").attr("id",t.get("swfDiv_id"));var i={width:t.get("w"),height:t.get("h")};t.get("swfDiv").css(i),t.get("mainDiv").append(t.get("swfDiv")),e.use(t.get("url_swf"),function(e,i){t.set("_case",new i({path:t.get("path_swf"),parent_id:t.get("swfDiv_id"),config:t.get("config")}))})}else e.use(t.get("url_svg"),function(e,i){t.set("_case",new i({parent_id:t.get("mainDiv_id"),configData:t.get("config").configData,chartData:t.get("config").chartData}))})},actions:function(e,t){var i=this;i.get("_case").actions(e,t)},resize:function(){var e=this;if(e.set("_resize_index",e.get("_resize_index")+1),0==e.get("_resize_index")%2){e.set("w",a("#"+e.get("parent_id")).width()),e.set("h",a("#"+e.get("parent_id")).height());var t={width:e.get("w"),height:e.get("h"),position:"relative"};if(e.get("mainDiv").css(t),r){var t={width:e.get("w"),height:e.get("h")};e.get("swfDiv").css(t)}else e.get("_case").actions("reset")}}}),n},{requires:["base","node"]});