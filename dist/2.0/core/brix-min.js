(function(e,t){function n(t){if(t=e.trim(t),t&&"/"!=t.charAt(t.length-1)&&(t+="/"),t.match(/^(http(s)?)|(file):/i)||g(t,"/")||(t=m+t),g(t,"/")){var n=o.location;t=n.protocol+"//"+n.host+t}for(var i,a=t.split("/"),r=[],c=0;a.length>c;c++)i=a[c],"."==i||(".."==i?r.pop():r.push(i));return t=r.join("/"),t.substring(0,t.length-1)}function i(){var t=/^(.*)brix(-min)?\.js[^\/]*/i,i=/brix(-min)?\.js/i,a=o.document.getElementsByTagName("script"),r=a[a.length-1],c=n(r.src),g=r.getAttribute("bx-config");g=g?Function("return "+g)():{},g.comboPrefix=g.comboPrefix||"??",g.comboSep=g.comboSep||",";var m,u,f=g.comboPrefix,l=g.comboSep,p=c.split(l),s=p[0],b=s.indexOf(f);return-1==b?m=c.replace(t,"$1"):(m=s.substring(0,b),u=s.substring(b+2,s.length),u.match(i)?m+=u.replace(t,"$1"):e.each(p,function(e){return e.match(i)?(m+=e.replace(t,"$1"),!1):void 0})),m=m.substring(0,m.lastIndexOf("brix")),e.mix({autoConfig:!0,path:m,componentsPath:"./",importsPath:"./",templateEngine:"./mu"},g)}var a=!1,r=[],o=window,c=o.location,g=e.startsWith,m=c.href.replace(c.hash,"").replace(/[^\/]*$/i,"");t=o[t]=o[t]||{};var u=i(),f="",l="20121226",p="2.0",s=!1;return e.mix(t,{config:function(n){s||(s=!0,n=e.merge({debug:"@DEBUG@"==f?!0:!1,combine:!0,tag:"@TAG@"==l?"":l,fixed:"@VERSION@"==p?"":p+"/",gallery:{}},u,n),"@VERSION@"==n.fixed&&(n.fixed=""),t.basePath=n.path,t.fixed=n.fixed,t.templateEngine=n.templateEngine,e.config({packages:[{name:"brix",path:n.path,combine:n.combine,tag:n.tag,charset:"utf-8"},{name:"components",path:n.componentsPath,combine:n.combine,debug:n.debug,tag:n.componentsTag||n.tag,charset:"utf-8"},{name:"imports",path:n.importsPath,combine:n.combine,debug:n.debug,tag:n.importsTag||n.tag,charset:"utf-8"}]}),e.config({map:[[/(.+brix\/)(gallery\/)(.+?)(\/.+?(?:-min)?\.(?:js|css))(\?[^?]+)?$/,function(e,t,i,a,r,o){var c=t+n.fixed+i+a;return n.gallery[a]&&(c+="/"+n.gallery[a]),n.debug&&(r=r.replace("-min","")),c+=r+(o?o:"")}],[/(.+brix\/)(core.+?)((?:-min)?\.js)(\?[^?]+)?$/,function(e,t,i,a,r){var o=t+n.fixed;return n.debug&&(a=a.replace("-min","")),o+=i+a+(r?r:"")}]]}))},ready:function(e){a?e.call(t):r.push(e)},_bx_fireReady:function(){if(!a&&(a=!0,r)){for(var e,n=0;e=r[n++];)e.call(t);r=null}}}),u.autoConfig&&(t.config({}),u.autoPagelet)?(e.later(function(){e.use("brix/core/pagelet",function(e,n){e.ready(function(){t.pagelet=new n({tmpl:"body"}),t._bx_fireReady()})})},1),void 0):(e.ready(function(){t._bx_fireReady()}),void 0)})(KISSY,"Brix");