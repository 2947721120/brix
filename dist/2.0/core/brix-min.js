(function(e,n){function t(e){return e?Function("return "+e)():{}}function i(){var n,i,a=/^(.*)(brix)(?:-min)?\.js[^\/]*/i,o=/(brix)(?:-min)?\.js/i,u=c.document.getElementsByTagName("script"),g=u[u.length-1],b=g.src,f=t(g.getAttribute("bx-config"));n=f.comboPrefix=f.comboPrefix||"??",i=f.comboSep=f.comboSep||",";var s,m,l=b.indexOf(n);return-1==l?m=b.replace(a,"$1"):(m=b.substring(0,l),"/"!=m.charAt(m.length-1)&&(m+="/"),s=b.substring(l+n.length).split(i),e.each(s,function(e){return e.match(o)?(m+=e.replace(a,"$1"),!1):void 0})),m=""+r.resolve(m),m=m.substring(0,m.lastIndexOf("brix")),e.mix({autoConfig:!0,base:m,componentsPath:"./",importsPath:"./",templateEngine:"./mu"},f)}var r,a=!1,o=[],c=e.Env.host;n=c[n]=c[n]||{},r=new e.Uri(c.location.href);var u=i(),g="",b="20121226",f="2.0",s=!1;return e.mix(n,{config:function(t){s||(s=!0,t=e.merge({debug:"@DEBUG@"==g?!0:!1,combine:!0,tag:"@TAG@"==b?"":b,fixed:"@VERSION@"==f?"":f+"/",gallery:{}},u,t),"@VERSION@"==t.fixed&&(t.fixed=""),n.basePath=t.base,n.fixed=t.fixed,n.templateEngine=t.templateEngine,e.config({packages:[{name:"brix",base:t.base,combine:t.combine,tag:t.tag,charset:"utf-8"},{name:"components",base:t.componentsPath,combine:t.combine,debug:t.debug,tag:t.componentsTag||t.tag,charset:"utf-8"},{name:"imports",base:t.importsPath,combine:t.combine,debug:t.debug,tag:t.importsTag||t.tag,charset:"utf-8"}]}),e.config({map:[[/(.+brix\/)(gallery\/)(.+?)(\/.+?(?:-min)?\.(?:js|css))(\?[^?]+)?$/,function(e,n,i,r,a,o){var c=n+t.fixed+i+r;return t.gallery[r]&&(c+="/"+t.gallery[r]),t.debug&&(a=a.replace("-min","")),c+=a+(o?o:"")}],[/(.+brix\/)(core.+?)((?:-min)?\.js)(\?[^?]+)?$/,function(e,n,i,r,a){var o=n+t.fixed;return t.debug&&(r=r.replace("-min","")),o+=i+r+(a?a:"")}]]}))},ready:function(e){a?e.call(n):o.push(e)},_bx_fireReady:function(){if(!a&&(a=!0,o)){for(var e,t=0;e=o[t++];)e.call(n);o=null}},returnJSON:function(e){return t(e)},absoluteFilePath:function(n,t){return""+new e.Uri(n.getFullPath()).resolve(t)}}),u.autoConfig&&(n.config({}),u.autoPagelet)?(e.later(function(){e.use("brix/core/pagelet",function(e,t){e.ready(function(){n.pagelet=new t({tmpl:"body"}),n._bx_fireReady()})})},1),void 0):(e.ready(function(){n._bx_fireReady()}),void 0)})(KISSY,"Brix");