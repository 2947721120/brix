(function(e,n){function t(e){return e?Function("return "+e)():{}}function i(){var n,i,r=/^(.*)(brix)(?:-min)?\.js[^\/]*/i,a=/(brix)(?:-min)?\.js/i,u=o.document.getElementsByTagName("script"),g=u[u.length-1],b=g.src,s=t(g.getAttribute("bx-config"));c&&-1!==(c.search||"").indexOf("bx-debug")&&(s.debug=!0),n=s.comboPrefix=s.comboPrefix||"??",i=s.comboSep=s.comboSep||",";var l,m,d=b.indexOf(n);return-1==d?m=b.replace(r,"$1"):(m=b.substring(0,d),"/"!=m.charAt(m.length-1)&&(m+="/"),l=b.substring(d+n.length).split(i),e.each(l,function(e){return e.match(a)?(m+=e.replace(r,"$1"),!1):void 0})),m=""+f.resolve(m),m=m.substring(0,m.lastIndexOf("brix")),e.mix({autoConfig:!0,base:m},s)}var r=!1,a=[],o=e.Env.host,c=o.location,u="",g="20121226",b="2.0",s=!1;n=o[n]=o[n]||{};var f=new e.Uri(c.href),l=i();return e.mix(n,{config:function(t){s||(s=!0,t=e.merge({componentsPath:"./",importsPath:"./",templateEngine:"brix/gallery/mu/",debug:""===u?!1:!0,combine:!1,tag:"@TAG@"==g?"":g,fixed:"@VERSION@"==b?"src/":b+"/",gallery:{}},l,t),n.basePath=t.base,n.fixed=t.fixed,n.templateEngine=t.templateEngine,e.config({packages:[{name:"brix",base:t.base,combine:t.combine,debug:t.debug,tag:t.tag,charset:"utf-8"},{name:"components",base:t.componentsPath,combine:t.combine,debug:t.debug,tag:t.componentsTag||t.tag,charset:"utf-8"},{name:"imports",base:t.importsPath,combine:t.combine,debug:t.debug,tag:t.importsTag||t.tag,charset:"utf-8"}]}),e.config({map:[[/(.+brix\/)(gallery\/)(.+?)(\/.+?(?:-min)?\.(?:js|css))(\?[^?]+)?$/,function(e,n,i,r,a,o){var c=n+t.fixed+i+r;return t.gallery[r]&&(c+="/"+t.gallery[r]),c+=a+(o?o:"")}],[/(.+brix\/)(core.+?)((?:-min)?\.js)(\?[^?]+)?$/,function(e,n,i,r,a){var o=n+t.fixed;return o+=i+r+(a?a:"")}]]}))},ready:function(e){r?e.call(n):a.push(e)},_bx_fireReady:function(){if(!r&&(r=!0,a)){for(var e,t=0;e=a[t++];)e.call(n);a=null}},returnJSON:function(e){return t(e)},absoluteFilePath:function(n,t){return""+new e.Uri(n.getFullPath()).resolve(t)}}),l.autoConfig&&(n.config({}),l.autoPagelet)?(e.later(function(){e.use("brix/core/pagelet",function(e,t){e.ready(function(){n.pagelet=new t({tmpl:"body"}),n._bx_fireReady()})})},1),void 0):(e.ready(function(){n._bx_fireReady()}),void 0)})(KISSY,"Brix");