(function(e,n){function t(e){return e?Function("return "+e)():{}}function i(){var n,i,a=/^(.*)(brix)(?:-min)?\.js[^\/]*/i,o=/(brix)(?:-min)?\.js/i,u=c.document.getElementsByTagName("script"),g=u[u.length-1],s=g.src,b=t(g.getAttribute("bx-config"));n=b.comboPrefix=b.comboPrefix||"??",i=b.comboSep=b.comboSep||",";var f,m,l=s.indexOf(n);return-1==l?m=s.replace(a,"$1"):(m=s.substring(0,l),"/"!=m.charAt(m.length-1)&&(m+="/"),f=s.substring(l+n.length).split(i),e.each(f,function(e){return e.match(o)?(m+=e.replace(a,"$1"),!1):void 0})),m=""+r.resolve(m),m=m.substring(0,m.lastIndexOf("brix")),e.mix({autoConfig:!0,base:m,componentsPath:"./",importsPath:"./",templateEngine:"./mu"},b)}var r,a=!1,o=[],c=e.Env.host;n=c[n]=c[n]||{},r=new e.Uri(c.location.href);var u=i(),g="",s="20121226",b="2.0",f=!1;return e.mix(n,{config:function(t){f||(f=!0,t=e.merge({debug:""===g?!1:!0,combine:!1,tag:"@TAG@"==s?"":s,fixed:"@VERSION@"==b?"src/":b+"/",gallery:{}},u,t),n.basePath=t.base,n.fixed=t.fixed,n.templateEngine=t.templateEngine,e.config({packages:[{name:"brix",base:t.base,combine:t.combine,debug:t.debug,tag:t.tag,charset:"utf-8"},{name:"components",base:t.componentsPath,combine:t.combine,debug:t.debug,tag:t.componentsTag||t.tag,charset:"utf-8"},{name:"imports",base:t.importsPath,combine:t.combine,debug:t.debug,tag:t.importsTag||t.tag,charset:"utf-8"}]}),e.config({map:[[/(.+brix\/)(gallery\/)(.+?)(\/.+?(?:-min)?\.(?:js|css))(\?[^?]+)?$/,function(e,n,i,r,a,o){var c=n+t.fixed+i+r;return t.gallery[r]&&(c+="/"+t.gallery[r]),c+=a+(o?o:"")}],[/(.+brix\/)(core.+?)((?:-min)?\.js)(\?[^?]+)?$/,function(e,n,i,r,a){var o=n+t.fixed;return o+=i+r+(a?a:"")}]]}))},ready:function(e){a?e.call(n):o.push(e)},_bx_fireReady:function(){if(!a&&(a=!0,o)){for(var e,t=0;e=o[t++];)e.call(n);o=null}},returnJSON:function(e){return t(e)},absoluteFilePath:function(n,t){return""+new e.Uri(n.getFullPath()).resolve(t)}}),u.autoConfig&&(n.config({}),u.autoPagelet)?(e.later(function(){e.use("brix/core/pagelet",function(e,t){e.ready(function(){n.pagelet=new t({tmpl:"body"}),n._bx_fireReady()})})},1),void 0):(e.ready(function(){n._bx_fireReady()}),void 0)})(KISSY,"Brix");