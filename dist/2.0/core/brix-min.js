(function(e,n){function t(e){return e?Function("return "+e)():{}}function i(){var n,i,a=/^(.*)(brix)(?:-min)?\.js[^\/]*/i,o=/(brix)(?:-min)?\.js/i,c=u.document.getElementsByTagName("script"),g=c[c.length-1],f=g.src,l=t(g.getAttribute("bx-config"));n=l.comboPrefix=l.comboPrefix||"??",i=l.comboSep=l.comboSep||",";var m,s,b=f.indexOf(n);return-1==b?s=f.replace(a,"$1"):(s=f.substring(0,b),"/"!=s.charAt(s.length-1)&&(s+="/"),m=f.substring(b+n.length).split(i),e.each(m,function(e){return e.match(o)?(s+=e.replace(a,"$1"),!1):void 0})),console.log(s),s=""+r.resolve(s.substring(0,s.lastIndexOf("brix"))),e.mix({autoConfig:!0,path:s,componentsPath:"./",importsPath:"./",templateEngine:"./mu"},l)}var r,a,o=!1,c=[],u=e.Env.host;u.location,n=u[n]=u[n]||{},r=new e.Uri(a);var g=i(),f="",l="20121226",m="2.0",s=!1;return e.mix(n,{config:function(t){s||(s=!0,t=e.merge({debug:"@DEBUG@"==f?!0:!1,combine:!0,tag:"@TAG@"==l?"":l,fixed:"@VERSION@"==m?"":m+"/",gallery:{}},g,t),"@VERSION@"==t.fixed&&(t.fixed=""),n.basePath=t.path,n.fixed=t.fixed,n.templateEngine=t.templateEngine,e.config({packages:[{name:"brix",path:t.path,combine:t.combine,tag:t.tag,charset:"utf-8"},{name:"components",path:t.componentsPath,combine:t.combine,debug:t.debug,tag:t.componentsTag||t.tag,charset:"utf-8"},{name:"imports",path:t.importsPath,combine:t.combine,debug:t.debug,tag:t.importsTag||t.tag,charset:"utf-8"}]}),e.config({map:[[/(.+brix\/)(gallery\/)(.+?)(\/.+?(?:-min)?\.(?:js|css))(\?[^?]+)?$/,function(e,n,i,r,a,o){var c=n+t.fixed+i+r;return t.gallery[r]&&(c+="/"+t.gallery[r]),t.debug&&(a=a.replace("-min","")),c+=a+(o?o:"")}],[/(.+brix\/)(core.+?)((?:-min)?\.js)(\?[^?]+)?$/,function(e,n,i,r,a){var o=n+t.fixed;return t.debug&&(r=r.replace("-min","")),o+=i+r+(a?a:"")}]]}))},ready:function(e){o?e.call(n):c.push(e)},_bx_fireReady:function(){if(!o&&(o=!0,c)){for(var e,t=0;e=c[t++];)e.call(n);c=null}},returnJSON:function(e){return t(e)},absoluteFilePath:function(n,t){return""+new e.Uri(n.getFullPath()).resolve(t)}}),g.autoConfig&&(n.config({}),g.autoPagelet)?(e.later(function(){e.use("brix/core/pagelet",function(e,t){e.ready(function(){n.pagelet=new t({tmpl:"body"}),n._bx_fireReady()})})},1),void 0):(e.ready(function(){n._bx_fireReady()}),void 0)})(KISSY,"Brix");