KISSY.add("brix/core/mu",function(e,n){function r(e,n){for(var r=t(e),i="",o=0;r.length>o;o++)i="if("+r[o]+")",n[i]||(n[i]=a(r[o]))}function t(e){var n=/\{{2,3}[\^#]?if\((.*?)\)\}{2,3}?/gi,r=/\{{2,3}[\^#]?if\((.*?)\)\}{2,3}?/i,t=e.match(n),a=[];if(t)for(var i=0;t.length>i;i++)a.push(t[i].match(r)[1]);return a}function a(e){e=e.split("==");var n=function(){for(var n=e[0].split("."),r=e[1],t=this,a=n.length-1;a>-1;a--){var i=n.slice(a),o=t;try{for(var c=0;i.length-1>c;c++)o=o[i[c]];if(i[i.length-1]in o)return""+o[i[i.length-1]]===r?!0:!1}catch(u){}}return!1};return n}function i(e,n){var r,t;for(r in e)t=e[r],t instanceof Array?o(t):"object"==typeof t&&5>n&&i(t,n+1)}function o(e){for(var n=0;e.length>n;n++){var r=e[n];"object"==typeof r&&(0===n?r.__first__=!0:n===e.length-1?r.__last__=!0:r.__mid__=!0,r.__index__=n)}}return{to_html:function(e,t){return"object"==typeof t&&i(t,0),e=e.replace(/(\{{2,3})@if/gi,"$1#if"),r(e,t),n.to_html.apply(this,arguments)},name:n.name,version:n.version,tags:n.tags,parse:n.parse,compile:n.compile,render:n.render,clearCache:n.clearCache}},{requires:["./mustache"]});