KISSY.add("brix/core/brick",function(e,t,r){var n=t.extend({initializer:function(){for(var e=this,t=e.constructor;t;){var r=t.RENDERERS;r&&(e.addSubTmpl(),e.get("dataset").setRenderer(r,e)),t=t.superclass&&t.superclass.constructor}e.pagelet=e.get("pagelet")},bindUI:function(){var e=this;e._bx_bindEvent()},_bx_detachEvent:function(){for(var e=this,t=e.constructor;t;){var r=t.EVENTS;r&&e._bx_removeEvents(r);var n=t.DOCEVENTS;n&&e._bx_removeEvents(n,document),t=t.superclass&&t.superclass.constructor}var a=e.get("events");a&&this._bx_removeEvents(a)},_bx_bindEvent:function(){for(var e=this,t=e.constructor;t;){var r=t.EVENTS;r&&this._bx_addEvents(r);var n=t.DOCEVENTS;n&&this._bx_addEvents(n,document),t=t.superclass&&t.superclass.constructor}var a=e.get("events");a&&this._bx_addEvents(a)},_bx_removeEvents:function(e,t){t=t||this.get("el");for(var n in e){var a=e[n];for(var i in a){var l=a[i];""===n?r.detach(t,i,l,this):r.undelegate(t,i,n,l,this)}}},_bx_addEvents:function(e,t){t=t||this.get("el");for(var n in e){var a=e[n];for(var i in a){var l=a[i];""===n?r.on(t,i,l,this):r.delegate(t,i,n,l,this)}}},destructor:function(){var e=this;if(e.get("rendered")){e._bx_detachEvent();var t=e.get("destroyAction"),r=e.get("el");switch(t){case"remove":r.remove();break;case"empty":r.empty()}}e.get("pagelet")&&(delete e.pagelet,e.set("pagelet",null))}},{ATTRS:{pagelet:{value:null}}},"Brick");return n},{requires:["./chunk","event"]});