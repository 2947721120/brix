KISSY.add("brix/gallery/kwicks/index",function(a,b){function c(){c.superclass.constructor.apply(this,arguments)}return c.ATTRS={isVertical:{value:!1},sticky:{value:!1},activeIndex:{value:0},triggerType:{value:"mouseenter"},activeCls:{value:"active"},spacing:{value:0},duration:{value:.3},easing:{value:"easeNone"},max:{},min:{},autoplay:{value:!1},interval:{value:3e3}},c.EVENTS={"":{mouseenter:function(){var a=this,b=a.get("autoplay");b&&a.stop()},mouseleave:function(){var a=this,b=a.get("autoplay"),c=a.get("sticky");if(b)a.start();else if(!c){var d=a.kwicks,e=d.length,f=a.get("activeCls"),g=a.get("spacing"),h=a.get("duration"),i=a.get("easing"),j=a.LoT,k=a.WoH,l=a.normWoH;d.stop().removeClass(f),d.each(function(a,b){var c={};c[k]=l,b<e-1&&(c[j]=b*l+b*g),a.animate(c,h,i)})}}}},c.METHODS={switchTo:function(a){var b=this,c=b.kwicks,d=c.length,e=b.preCalcLoTs,f=b.get("activeCls"),g=b.get("duration"),h=b.get("easing"),i=b.LoT,j=b.WoH,k=b.max,l=b.min;a>=d||a<0?(a=0,b.set("activeIndex",0)):b.set("activeIndex",a);var m=c.item(a);c.stop().removeClass(f),m.addClass(f),c.each(function(b,c){var f={};m[0]==b[0]?(f[j]=k,c>0&&c<d-1&&(f[i]=e[a][c])):(f[j]=l,c>0&&c<d-1&&(f[i]=e[a][c])),b.animate(f,g,h)})},start:function(){var b=this,c=b.get("autoplay"),d=b.get("interval");c&&(b.stop(),b.timer=a.later(function(){var a=b.get("activeIndex");b.switchTo(a+1)},d,!0,b))},stop:function(){var a=this;a.timer&&(a.timer.cancel(),a.timer=null)}},a.extend(c,b,{initialize:function(){var a=this,b=a.get("isVertical"),c=a.get("sticky"),d=a.get("activeIndex"),e=a.get("triggerType"),f=a.get("activeCls"),g=a.get("spacing"),h=a.get("duration"),i=a.get("easing"),j=a.max=a.get("max"),k=a.min=a.get("min"),l=a.get("autoplay"),m=a.WoH=b?"height":"width",n=a.LoT=b?"top":"left",o=a.get("el"),p=a.kwicks=o.all("li"),q=p.length,r=a.normWoH=p.item(0).css(m).replace(/px/,"");j?k=a.min=(r*q-j)/(q-1):j=a.max=r*q-k*(q-1),b?o.css({width:p.item(0).css("width"),height:r*q+g*(q-1)+"px"}):o.css({width:r*q+g*(q-1)+"px",height:p.item(0).css("height")});var s=a.preCalcLoTs=[];for(var t=0;t<q;t++){s[t]=[];for(var u=1;u<q-1;u++)t==u?s[t][u]=b?u*k+u*g:u*k+u*g:s[t][u]=(u<=t?u*k:(u-1)*k+j)+u*g}p.each(function(h,i){i===0?h.css(n,"0px"):i==q-1?h.css(b?"bottom":"right","0px"):c?h.css(n,s[d][i]):h.css(n,i*r+i*g),c&&(d==i?(h.css(m,j+"px"),h.addClass(f)):h.css(m,k+"px")),h.css({margin:0,position:"absolute"}),h.on(e,function(){a.switchTo(i)})}),a.start()},destructor:function(){self.timer&&(self.timer.cancel(),self.timer=null,self.kwicks=null)}}),a.augment(c,c.METHODS),c},{requires:["brix/core/brick"]});