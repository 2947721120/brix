KISSY.add("brix/gallery/dialog/index",function(a,b,c){function d(a){var b=this;d.superclass.constructor.apply(this,arguments)}return d.ATTRS={start:{value:{left:600,top:100,opacity:0}},end:{value:{left:100,top:100,opacity:1}},x:{getter:function(){var a=this;return a.get("start").left}},y:{getter:function(){var a=this;return a.get("start").top}},dir:{getter:function(){var a=this,b="",c=a.get("start"),d=a.get("end");return b=c.left===d.left&&(c.top<d.top?"down":"up")||c.top===d.top&&(c.left<d.left?"right":"left")||"left",b}},prefixCls:{value:"ux-"},duration:{value:.3},easing:{value:"easeOut"},closable:{value:!0},mask:{value:!1},tmpl:{value:null},data:{}},a.extend(d,c,{initializer:function(){var a=this;a.on("afterRenderUI",function(){var c=a.get("el").one(".ux-ext-close");c.one(".ux-ext-close-x").html("&#223"),c.on("mouseenter",function(a){c.one(".ux-ext-close-x").html("&#378")}),c.on("mouseleave",function(a){c.one(".ux-ext-close-x").html("&#223")}),a.get("tmpl")&&(a.pagelet=new b({container:a.get("contentEl"),autoRender:!0,tmpl:a.get("tmpl"),data:a.get("data")}),a.pagelet.addBehavior())})},_visibilityChange:function(b,c){var d=this,e=d.get("el"),f=a.one("body"),g="start";e.stop(),e.css("visibility","visible"),b?(e.css(d.get("start")),g="end"):(e.css(d.get("end")),g="start"),f.css({width:f.width(),height:f.height(),overflow:"hidden"}),e.animate(d.get(g),d.get("duration"),d.get("easing"),function(){e.css("visibility",b?"visible":"hidden"),b||e.css({left:"-99999px",top:"-99999px"}),f.css({width:"",height:"",overflow:""}),c&&c.call(d)})},bindUI:function(){var a=this;a.on("beforeVisibleChange",function(b){var c=b.newVal;if(!c)return a._visibilityChange(c,function(){a.get("el").css("visibility","hidden"),a.set("visible",!1,{silent:!0}),a.fire("hide")}),!1}),a.on("afterVisibleChange",function(b){var c=b.newVal;c&&a._visibilityChange(c)})}}),d},{requires:["brix/core/pagelet","overlay","./dialog.css"]});