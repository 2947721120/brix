KISSY.add("brix/gallery/tooltip/index",function(e,t,a){function i(e){var t=this;e.el&&(t.set("trigger",e.el),delete e.el),i.superclass.constructor.apply(this,arguments)}return i.ATTRS={trigger:{value:!1},triggerType:{value:"mouse"},mouseDelay:{value:1},toggle:{value:!1},width:{value:200},align:{setter:function(e){return e.offset||("tl"==e.points[0]&&"bl"==e.points[1]||"tr"==e.points[0]&&"br"==e.points[1]?e.offset=[0,-8]:"bl"==e.points[0]&&"tl"==e.points[1]||"br"==e.points[0]&&"tr"==e.points[1]?e.offset=[0,8]:"tr"==e.points[0]&&"tl"==e.points[1]||"br"==e.points[0]&&"bl"==e.points[1]?e.offset=[8,0]:("tl"==e.points[0]&&"tr"==e.points[1]||"bl"==e.points[0]&&"br"==e.points[1])&&(e.offset=[-8,0])),e},getter:function(e){return e||(e={node:!1,points:["bl","tl"],offset:[0,0]}),e}},content:{setter:function(e){var t=this,a=e||"",i=t.get("align")||{};return i.points||(i.points=["br","tl"]),a='<div class="arrow arrow-'+i.points[0]+"-"+i.points[1]+'"><div></div></div><div class="tooltip-bd">'+a+"</div>"}},elCls:{value:"tooltip"},prefixCls:{value:"tooltip-"},closable:{value:!0},mask:{value:!1},tmpl:{value:null},data:{}},e.extend(i,a,{initializer:function(){var a=this,i=a.get("align"),n=a.get("trigger");if(!i.node&&n&&(i.node=n,a.set("align",i)),a.on("hide",function(){a._clearHiddenTimer()}),n){var r=a.get("triggerType"),s="click";"mouse"==r?(s="mouseenter",e.all(n).on("mouseenter",function(e){e.preventDefault(),a._clearHiddenTimer(),a.show()})):a.get("toggle")?e.all(n).on(s,function(e){e.preventDefault(),a.toggle()}):e.all(n).on(s,function(e){e.preventDefault(),a.show()}),e.all(n).on("mouseleave",function(e){e.preventDefault(),a._setHiddenTimer()})}a.on("afterRenderUI",function(){a.get("el").on("mouseleave",a._setHiddenTimer,a).on("mouseenter",a._clearHiddenTimer,a);var e=a.get("el").one(".tooltip-ext-close");if(e.one(".tooltip-ext-close-x").html("&#223"),a.get("tmpl")){var i=a.get("contentEl");a.get("content")&&(i=i.one(".tooltip-bd")),a.pagelet=new t({container:i,tmpl:a.get("tmpl"),data:a.get("data")})}})},destructor:function(){var e=this;e.pagelet&&(e.pagelet.destroy(),e.pagelet=null)},toggle:function(){var t=this,a=t.get("el");a&&!e.isString(a)?"hidden"==a.css("visibility")?t.show():t.hide():t.show()},_setHiddenTimer:function(){var t=this,a=t.get("mouseDelay");a&&(t._clearHiddenTimer(),t._hiddenTimer=e.later(function(){t.hide()},1e3*t.get("mouseDelay")))},_clearHiddenTimer:function(){var e=this;e._hiddenTimer&&(e._hiddenTimer.cancel(),e._hiddenTimer=void 0)}}),i},{requires:["brix/core/pagelet","overlay"]});