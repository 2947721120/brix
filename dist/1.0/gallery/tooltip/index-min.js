KISSY.add("brix/gallery/tooltip/index",function(a,b,c){function d(a){var b=this;a.el&&(b.set("trigger",a.el),delete a.el),d.superclass.constructor.apply(this,arguments)}return d.ATTRS={trigger:{value:!1},triggerType:{value:"mouse"},mouseDelay:{value:1},toggle:{value:!1},width:{value:200},align:{setter:function(a){if(!a.offset)if(a.points[0]=="tl"&&a.points[1]=="bl"||a.points[0]=="tr"&&a.points[1]=="br")a.offset=[0,-8];else if(a.points[0]=="bl"&&a.points[1]=="tl"||a.points[0]=="br"&&a.points[1]=="tr")a.offset=[0,8];else if(a.points[0]=="tr"&&a.points[1]=="tl"||a.points[0]=="br"&&a.points[1]=="bl")a.offset=[8,0];else if(a.points[0]=="tl"&&a.points[1]=="tr"||a.points[0]=="bl"&&a.points[1]=="br")a.offset=[-8,0];return a},getter:function(a){return a||(a={node:!1,points:["bl","tl"],offset:[0,0]}),a}},content:{setter:function(a){var b=this,c=a||"",d=b.get("align")||{};return d.points||(d.points=["br","tl"]),c='<div class="arrow arrow-'+d.points[0]+"-"+d.points[1]+'"><div></div></div><div class="tooltip-bd">'+c+"</div>",c}},elCls:{value:"tooltip"},prefixCls:{value:"tooltip-"},closable:{value:!0},mask:{value:!1},tmpl:{value:null},data:{}},a.extend(d,c,{initializer:function(){var c=this,d=c.get("align"),e=c.get("trigger");!d.node&&e&&(d.node=e,c.set("align",d)),c.on("hide",function(){c._clearHiddenTimer()});if(e){var f=c.get("triggerType"),g="click";f=="mouse"?(g="mouseenter",a.all(e).on("mouseenter",function(a){a.preventDefault(),c._clearHiddenTimer(),c.show()})):c.get("toggle")?a.all(e).on(g,function(a){a.preventDefault(),c.toggle()}):a.all(e).on(g,function(a){a.preventDefault(),c.show()}),a.all(e).on("mouseleave",function(a){a.preventDefault(),c._setHiddenTimer()})}c.on("afterRenderUI",function(){c.get("el").on("mouseleave",c._setHiddenTimer,c).on("mouseenter",c._clearHiddenTimer,c);var a=c.get("el").one(".tooltip-ext-close");a.one(".tooltip-ext-close-x").html("&#223");if(c.get("tmpl")){var d=c.get("contentEl");c.get("content")&&(d=d.one(".tooltip-bd")),c.pagelet=new b({container:d,tmpl:c.get("tmpl"),data:c.get("data")})}})},destructor:function(){var a=this;a.pagelet&&(a.pagelet.destroy(),a.pagelet=null)},toggle:function(){var b=this,c=b.get("el");c&&!a.isString(c)?c.css("visibility")=="hidden"?b.show():b.hide():b.show()},_setHiddenTimer:function(){var b=this,c=b.get("mouseDelay");c&&(b._clearHiddenTimer(),b._hiddenTimer=a.later(function(){b.hide()},b.get("mouseDelay")*1e3))},_clearHiddenTimer:function(){var a=this;a._hiddenTimer&&(a._hiddenTimer.cancel(),a._hiddenTimer=undefined)}}),d},{requires:["brix/core/pagelet","overlay"]});