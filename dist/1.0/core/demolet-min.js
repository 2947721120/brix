KISSY.add("brix/core/demolet",function(a,b,c){function d(b,d,e){e=e||"@",d=d||{};var f=new RegExp("\\{\\{"+e+"(.+)?\\}\\}","ig");return b=b.replace(f,function(b,e){a.log(e);var f="",g=e.replace(/\//ig,"_").replace(/\./ig,"_");return d[g]=d[g]||{},c({url:e+"template.html",async:!1,success:function(a,b,c){f="{{#"+g+"}}"+a+"{{/"+g+"}}"}}),c({url:e+"data.json",async:!1,dataType:"json",success:function(a,b,c){for(var e in a)d[g][e]=a[e]}}),f}),{tmpl:b,data:d}}function e(){e.superclass.constructor.apply(this,arguments)}return e.ATTRS={s:{value:"@"},tmpl:{setter:function(a){var b=this,c=b.get("data")||{},e=d(a,c,b.get("s"));return b.set("data",e.data),e.tmpl}}},a.extend(e,b,{}),e},{requires:["./pagelet","ajax"]});