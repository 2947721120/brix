KISSY.add("brix/core/mu",function(e,n){function t(e,n){for(var t=r(e),i="",o=0;t.length>o;o++)i="if("+t[o]+")",n[i]||(n[i]=a(t[o]))}function r(e){var n=/\{{2,3}[\^#]?if\((.*?)\)\}{2,3}?/gi,t=/\{{2,3}[\^#]?if\((.*?)\)\}{2,3}?/i,r=e.match(n),a=[];if(r)for(var i=0;r.length>i;i++)a.push(r[i].match(t)[1]);return a}function a(e){e=e.split("==");var n=function(){for(var n=e[0].split("."),t=e[1],r=this,a=n.length-1;a>-1;a--){var i=n.slice(a),o=r;try{for(var c=0;i.length-1>c;c++)o=o[i[c]];if(i[i.length-1]in o)return""+o[i[i.length-1]]===t?!0:!1}catch(f){}}return!1};return n}function i(e,n){var t,r;for(t in e)r=e[t],r instanceof Array?o(r):"object"==typeof r&&5>n&&i(r,n+1)}function o(e){for(var n=0;e.length>n;n++){var t=e[n];"object"==typeof t&&(0===n?t.__first__=!0:n===e.length-1?t.__last__=!0:t.__mid__=!0,t.__index__=n)}}return{to_html:function(e,r){return"object"==typeof r&&i(r,0),e=e.replace(/(\{{2,3})@if/gi,"$1#if"),t(e,r),n.to_html.apply(this,arguments)},name:n.name,version:n.version,tags:n.tags,parse:n.parse,compile:n.compile,render:n.render,clearCache:n.clearCache}},{requires:["./mustache"]});