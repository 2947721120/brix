(function(t,e){function i(e){if(e=t.trim(e),e&&"/"!=e.charAt(e.length-1)&&(e+="/"),e.match(/^(http(s)?)|(file):/i)||f(e,"/")||(e=s+e),f(e,"/")){var i=o.location;e=i.protocol+"//"+i.host+e}for(var n,a=e.split("/"),r=[],c=0;a.length>c;c++)n=a[c],"."==n||(".."==n?r.pop():r.push(n));return e=r.join("/"),e.substring(0,e.length-1)}function n(){var e=/^(.*)brix(-min)?\.js[^\/]*/i,n=/brix(-min)?\.js/i,a=o.document.getElementsByTagName("script"),r=a[a.length-1],c=i(r.src),f=r.getAttribute("bx-config");f=f?Function("return "+f)():{},f.comboPrefix=f.comboPrefix||"??",f.comboSep=f.comboSep||",";var s,g,u=f.comboPrefix,l=f.comboSep,p=c.split(l),m=p[0],h=m.indexOf(u);return-1==h?s=c.replace(e,"$1"):(s=m.substring(0,h),g=m.substring(h+2,m.length),g.match(n)?s+=g.replace(e,"$1"):t.each(p,function(t){return t.match(n)?(s+=t.replace(e,"$1"),!1):void 0})),s=s.substring(0,s.lastIndexOf("brix")),t.mix({autoConfig:!0,path:s,componentsPath:"./",importsPath:"./"},f)}var a=!1,r=[],o=window,c=o.location,f=t.startsWith,s=c.href.replace(c.hash,"").replace(/[^\/]*$/i,"");e=o[e]=o[e]||{};var g=n(),u="",l="20121111",p="1.0",m=!1;return t.mix(e,{config:function(i){m||(m=!0,i=t.merge({debug:"@DEBUG@"==u?!0:!1,tag:"@TAG@"==l?"":l,fixed:"@VERSION@"==p?"":p+"/",gallery:{}},g,i),"@VERSION@"==i.fixed&&(i.fixed=""),e.basePath=i.path,e.fixed=i.fixed,t.config({packages:[{name:"brix",path:i.path,tag:i.tag,charset:"utf-8"},{name:"components",path:i.componentsPath,tag:i.componentsTag||i.tag,charset:"utf-8"},{name:"imports",path:i.importsPath,tag:i.importsTag||i.tag,charset:"utf-8"}]}),t.config({map:[[/(.+brix\/)(gallery\/)(.+?)(\/.+?(?:-min)?\.(?:js|css))(\?[^?]+)?$/,function(t,e,n,a,r,o){var c=e+i.fixed+n+a;return i.gallery[a]&&(c+="/"+i.gallery[a]),i.debug&&(r=r.replace("-min","")),c+=r+(o?o:"")}],[/(.+brix\/)(core.+?)((?:-min)?\.js)(\?[^?]+)?$/,function(t,e,n,a,r){var o=e+i.fixed;return i.debug&&(a=a.replace("-min","")),o+=n+a+(r?r:"")}]]}))},ready:function(t){a?t.call(e):r.push(t)},_fireReady:function(){if(!a&&(a=!0,r)){for(var t,i=0;t=r[i++];)t.call(e);r=null}}}),g.autoConfig&&(e.config({}),g.autoPagelet)?(t.later(function(){t.use("brix/core/pagelet",function(t,i){t.ready(function(){e.pagelet=new i({tmpl:"body"}),e._fireReady()})})},1),void 0):(t.ready(function(){e._fireReady()}),void 0)})(KISSY,"Brix");