<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Brix StarRating Demo</title>
        <link type="text/css" rel="stylesheet" href="../../../src/style/brix-min.css" charset="utf-8">
        <link rel="stylesheet" href="../../../src/gallery/starrating/index.css">
        <link rel="stylesheet" href="../../assets/doc.css">
        <script src="http://g.tbcdn.cn/kissy/k/1.4.2/seed.js"></script>
        <script src="../../../src/core/brix.js" bx-config="{autoConfig:true,fixed:'src/'}"></script>
    </head>
    <body>
        <div id="J_container" class="container">
            <div class="clearfix">
                <div id="dafendaxingxing" bx-config="{split:1,maxValue:5,length:5}" style="float:left" bx-name="starrating" class="starrating">
                </div>
                <div id="dafentip" style="color:#999;padding-left:20px;float:left">
                    点击星星为商品打分
                </div>
            </div>
            <br>
            <br>
            <div class="clearfix">
                <div style="float:left" class="starrating-static clearfix">
                    <div class="starrating-static-on" style="width:50%;"></div>
                </div>
                <div style="color:#999;padding-left:20px;float:left">
                    推荐
                </div>
            </div>
            <br>
            <br>
            <div class="clearfix">
                <div  style="float:left;margin-top:14px;" class="starrating-static">
                    <div class="starrating-static-on" style="width:78%;"></div>
                </div>
                <div style="padding-left:20px;float:left">
                    <span style="font-family:tahoma;color:#488fcd;font-size:28px;">3.9</span><span style="padding-left:10px;color:#999;">(满分5分)</span>
                </div>
            </div>
            <br>
            <br>
            <div class="clearfix">
                <div style="float:left;margin-top:3px" class="starrating-static-s">
                    <div class="starrating-static-s-on" style="width:50%;"></div>
                </div>
                <div style="font-family:tahoma;color:#999;padding-left:10px;float:left">
                    3.9
                </div>
            </div>
            <br>
            <br>
            <div class="clearfix">
                <div style="float:left;margin-top:3px" class="starrating-static-s">
                    <div class="starrating-static-s-on" style="width:50%;"></div>
                </div>
                <div style="color:#999;padding-left:10px;float:left">
                    (共320个点评)
                </div>
            </div>
            <br>
            <br>
            <h2 class="h2">静态大猩猩</h2>
            <div class="starrating-static clearfix" title="自定义大猩猩">
                <div class="starrating-static-on" style="width:50%;"></div>
            </div>
            <h2 class="h2">静态小猩猩</h2>
            <div class="starrating-static-s clearfix" title="自定义小猩猩">
                <div class="starrating-static-s-on" style="width:40%;"></div>
            </div>

            <h2 class="h2">大猩猩</h2>
            <div id="daxingxing" bx-name="starrating" class="starrating clearfix">
            </div>
            <div style="padding-top:10px;"><a href="#" class="btn">设置</a></div>
            <h2 class="h2">小猩猩</h2>
            <div id="xiaoxingxing" bx-name="starrating" class="starrating-s clearfix">
            </div>
            <h2 class="h2">自定义分数</h2>
            <div bx-name="starrating" bx-config="{split:1}" class="starrating clearfix">
                <input class="star" type="radio" name="test-1-rating-2" value="1"/>
                <input class="star" type="radio" name="test-1-rating-2" value="5"/>
                <input class="star" type="radio" name="test-1-rating-2" value="7"/>
                <input class="star" type="radio" name="test-1-rating-2" value="3"/>
                <input class="star" type="radio" name="test-1-rating-2" value="6"/>
            </div>
            <h2 class="h2">奇葩需求</h2>
            <div bx-name="starrating" bx-config="{split:1}" class="starrating clearfix">
                <input class="star" type="radio" name="test-2-rating-1" value="N" title="No"/>
                <input class="star" type="radio" name="test-2-rating-1" value="M" title="Maybe" checked="checked"/>
                <input class="star" type="radio" name="test-2-rating-1" value="Y" title="Yes"/>
            </div>
            <h2 class="h2">考试成绩100分</h2>
            <div bx-name="starrating " class="starrating clearfix" bx-config="{split:1,maxValue:100,length:100,defaultValue:20}">
            </div>
         </div>
        <script>
            KISSY.ready(function(S) {
                KISSY.use("brix/core/pagelet", function(S, Pagelet) {
                    var config = {
                        tmpl:'#J_container'
                    }
                    var p = new Pagelet(config);
                    p.addBehavior();
                    p.ready(function(){
                        var daxingxing = p.getBrick('daxingxing');

                        //设置分数和readOnly
                        S.one('.btn').on('click',function(e){
                            e.halt();
                            daxingxing.select('4.5');
                            daxingxing.readOnly();
                        });

                        var xiaoxingxing = p.getBrick('xiaoxingxing');

                        xiaoxingxing.on('focus',function(ev){
                            top.console.log('focus:'+ev.value);
                        });
                        xiaoxingxing.on('blur',function(ev){
                            top.console.log('blur:'+ev.value);
                        });
                        xiaoxingxing.on('selected',function(ev){
                            top.console.log('selected:'+ev.value);
                            //xiaoxingxing.readOnly();
                        });

                        function setFen(v){
                            var node = S.one('#dafentip'),
                            val = parseInt(v);
                            switch(val){
                                case 1:
                                    node.html('很差');
                                    break;
                                case 2:
                                    node.html('不好');
                                    break;
                                case 3:
                                    node.html('一般');
                                    break;
                                case 4:
                                    node.html('推荐');
                                    break;
                                case 5:
                                    node.html('极佳');
                                    break;
                            }
                        }

                        var dafendaxingxing = p.getBrick('dafendaxingxing'),
                            fen;
                        dafendaxingxing.on('focus',function(ev){
                            setFen(ev.value);
                        });
                        dafendaxingxing.on('blur',function(ev){
                            if(!fen){
                                S.one('#dafentip').html('点击星星为商品打分');
                            }
                            else{
                               setFen(fen);
                            }
                        });
                        dafendaxingxing.on('selected',function(ev){
                            setFen(ev.value);
                            fen = ev.value;
                        });

                    });
                });
            });
        </script>
    </body>
</html>
